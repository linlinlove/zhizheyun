require('../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["chat_pages/components/chat/chat"],{"0730":function(e,n,t){"use strict";t.r(n);var o=t("0a4e"),i=t.n(o);for(var a in o)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return o[e]}))}(a);n["default"]=i.a},"0a4e":function(e,n,t){"use strict";(function(e,o){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=t("e4a8"),a=t("cc4a"),c={data:function(){return{__comps__:{msglist:null,inputbar:null,audio:null},inputbarVisible:"block",action:null,pubUrl:"",subUrl:"",showEmedia:!1,showmultiEmedia:!1,showEmediaInvite:!1,emediaAction:null,multiEmediaVisible:"block",confrId:"",groupId:"",confrMember:[]}},components:{chatMsglist:function(){t.e("chat_pages/components/chat/msglist/msglist").then(function(){return resolve(t("ef71"))}.bind(null,t)).catch(t.oe)},chatInputbar:function(){Promise.all([t.e("chat_pages/common/vendor"),t.e("chat_pages/components/chat/inputbar/inputbar")]).then(function(){return resolve(t("419d"))}.bind(null,t)).catch(t.oe)},chatSuitAudio:function(){Promise.all([t.e("chat_pages/common/vendor"),t.e("chat_pages/components/chat/inputbar/suit/audio/audio")]).then(function(){return resolve(t("568d"))}.bind(null,t)).catch(t.oe)},chatEmediaInvite:function(){t.e("chat_pages/components/chat/emediaInvite/emediaInvite").then(function(){return resolve(t("7657"))}.bind(null,t)).catch(t.oe)},chatMultiEmedia:function(){t.e("chat_pages/components/chat/multiemedia/index").then(function(){return resolve(t("f3dc"))}.bind(null,t)).catch(t.oe)}},props:{username:{type:Object,default:function(){return{}}},chatType:{type:String,default:a.chatType.SINGLE_CHAT}},computed:{computedUserName:function(){return this.username}},mounted:function(){this.username=e.username,e.$on("createConfrSuccess",this.onCreateConfrSuccess)},moved:function(){},destroyed:function(){},methods:{toggleRecordModal:function(){this.$refs.chatSuitAudio.toggleRecordModal()},normalScroll:function(){this.$refs.chatMsglist.normalScroll(),this.$refs.chatInputbar.cancelEmoji(),this.$refs.chatInputbar.closeFunModal()},clickMsg:function(e){this.$emit("onClickInviteMsg",e),console.log("点击消息上一级",e)},shortScroll:function(){this.$refs.chatMsglist.shortScroll()},saveSendMsg:function(e){i.saveMsg(e.msg,e.type),this.$refs.chatInputbar.cancelEmoji(),this.$refs.chatInputbar.closeFunModal()},getMore:function(){this.$refs.chatMsglist.getHistoryMsg()},onMakeVideoCall:function(){this.setData({showEmediaInvite:!0,inputbarVisible:"none",action:"create"}),console.log(this.showEmediaInvite)},onStartConfr:function(e){console.log("发起邀请的回调",e),this.setData({showEmediaInvite:!1,showmultiEmedia:!0,multiEmediaVisible:"block",inputbarVisible:"none",confrMember:e.confrMember,emediaAction:{action:"create"}}),this.$emit("onMakeVideoCall",{confrMember:e.confrMember,groupId:this.username.groupId})},onCreateConfrSuccess:function(e){console.log("创建会成功议回调",e),this.setData({confrId:e.confrId}),getApp().globalData.confrId=e.confrId,this.sendInviteMsg(this.confrMember,e.confrId,e)},onGoBack:function(){this.setData({showEmediaInvite:!1,showmultiEmedia:!0,multiEmediaVisible:"block",inputbarVisible:"none",confrMember:[]})},onInviteMember:function(e){var n=this.username;this.username.groupId||(n.groupId=e.detail),this.setData({action:"invite",showEmediaInvite:!0,inputbarVisible:"none",multiEmediaVisible:"none"})},onMakeAudioCall:function(){this.setData({showEmediaInvite:!0,showmultiEmedia:!1,inputbarVisible:"none"})},onClickInviteMsg:function(e){console.log("收到邀请消息"),console.log(e);var n=e.conferenceId,t="string"==typeof e.msg_extension?JSON.parse(e.msg_extension):e.msg_extension,o=e.password||"";this.setData({emediaAction:{action:"join",confrId:n,password:o,roomName:e.roomName||""},showEmediaInvite:!1,showmultiEmedia:!0,inputbarVisible:"none",groupId:t.group_id})},onHangup:function(){this.setData({showEmediaInvite:!1,showmultiEmedia:!1,inputbarVisible:"block"}),getApp().globalData.confrId=""},sendInviteMsg:function(n,t,i){var a=this;console.log("%c members","background: green"),console.log(n),console.log("进入发邀请的函数",n),console.log("this.username.groupId----",this.username.groupId),console.log("confrId",t),console.log("data",i),n&&n.forEach((function(n){var t=e.WebIM.conn.getUniqueId(),i=new e.WebIM.message("txt",t);i.set({msg:o.WebIM.conn.context.userId+" invite you to video call",from:o.WebIM.conn.context.userId,to:n,roomType:!1,chatType:"singleChat",ext:{msg_extension:JSON.stringify({inviter:o.WebIM.conn.context.userId,group_id:a.username.groupId}),password:"123456",conferenceId:getApp().globalData.confrId},success:function(e,t){console.log("发送邀请消息成功 to: "+n)},fail:function(e,n){console.log("发送邀请消息失败了")}}),console.log("发送邀请",i.body),e.WebIM.conn.send(i.body)}))}}};n.default=c}).call(this,t("543d")["default"],t("bc2e")["default"])},"0b57":function(e,n,t){"use strict";var o=t("c56c"),i=t.n(o);i.a},c56c:function(e,n,t){},d929:function(e,n,t){"use strict";t.d(n,"b",(function(){return o})),t.d(n,"c",(function(){return i})),t.d(n,"a",(function(){}));var o=function(){var e=this.$createElement;this._self._c},i=[]},f467:function(e,n,t){"use strict";t.r(n);var o=t("d929"),i=t("0730");for(var a in i)["default"].indexOf(a)<0&&function(e){t.d(n,e,(function(){return i[e]}))}(a);t("0b57");var c=t("f0c5"),s=Object(c["a"])(i["default"],o["b"],o["c"],!1,null,null,null,!1,o["a"],void 0);n["default"]=s.exports}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'chat_pages/components/chat/chat-create-component',
    {
        'chat_pages/components/chat/chat-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("f467"))
        })
    },
    [['chat_pages/components/chat/chat-create-component']]
]);
