require('../../../../../common/vendor.js');(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["chat_pages/components/chat/msglist/type/audio/audio"],{"0b96":function(t,n,o){"use strict";o.r(n);var i=o("b49f"),a=o("904a");for(var e in a)["default"].indexOf(e)<0&&function(t){o.d(n,t,(function(){return a[t]}))}(e);o("5788");var s=o("f0c5"),u=Object(s["a"])(a["default"],i["b"],i["c"],!1,null,null,null,!1,i["a"],void 0);n["default"]=u.exports},3058:function(t,n,o){"use strict";(function(t){Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;var i=o("0ff1"),a=o("4652"),e={data:function(){return{playStatus:a,curStatus:a.STOP,time:"0'",opcity:1,__comps__:{audioCtx:null},style:""}},components:{},props:{msg:{type:Object,val:{}}},obeyMuteSwitch:!1,autoplay:!0,created:function(){},beforeMount:function(){this.setData({time:this.msg.msg.length+"''",style:this.msg.style})},moved:function(){},destroyed:function(){var t=this.$data.__comps__.audioCtx=i.getCtx(this.msg.mid);this.audioPause(t),this.delEvent()},mounted:function(){var n=this,o=this.$data.__comps__.audioCtx=i.getCtx(this.msg.mid);o.autoplay=!1,o.loop=!1,this.onPlaying=function(){n.setData({curStatus:a.PLAYING}),t.inter&&clearInterval(t.inter),t.inter=setInterval((function(){var t=n.opcity;n.setData({opcity:1==t?.4:1})}),500)},this.onPause=function(){parseInt(n.time,10)<1||n.setData({curStatus:a.PAUSE,opcity:1})},this.onDone=function(){n.setData({curStatus:a.STOP,opcity:1}),clearInterval(t.inter)},this.onTimeUpdate=function(){n.setData({time:(o.currentTime>>0)+"'"})},this.onWait=function(){t.showToast({title:"下载中...",duration:1e3})},this.addEvent()},methods:{audioPlay:function(){if("alipay"!==t.getSystemInfo().app){t.inter&&clearInterval(t.inter);var n=this.$data.__comps__.audioCtx,o="";t.downloadFile({url:this.msg.msg.data,header:{"X-Requested-With":"XMLHttpRequest",Accept:"audio/mp3",Authorization:"Bearer "+this.msg.msg.token},success:function(t){o=t.tempFilePath,console.log("音频本地",n),n.src=o,n.play()},fail:function(n){console.log("downloadFile failed",n),t.showToast({title:"下载失败",duration:1e3})}})}else t.showToast({duration:2e3,title:"支付宝小程序不支持音频消息"})},audioPause:function(t){var n=this.$data.__comps__.audioCtx=i.getCtx(this.msg.mid)||t;n&&n.pause()},addEvent:function(){var t=this.$data.__comps__.audioCtx;t.onPlay(this.onPlaying),t.onPause(this.onPause),t.onWaiting(this.onPause),t.onStop(this.onDone),t.onEnded(this.onDone),t.onError(this.onDone),t.onWaiting(this.onWait)},delEvent:function(){var t=this.$data.__comps__.audioCtx;t.offPlay(this.onPlaying),t.offPause(this.onPause),t.offWaiting(this.onPause),t.offStop(this.onDone),t.offEnded(this.onDone),t.offError(this.onDone),t.offWaiting(this.onWait)}}};n.default=e}).call(this,o("543d")["default"])},5788:function(t,n,o){"use strict";var i=o("87c6"),a=o.n(i);a.a},"87c6":function(t,n,o){},"904a":function(t,n,o){"use strict";o.r(n);var i=o("3058"),a=o.n(i);for(var e in i)["default"].indexOf(e)<0&&function(t){o.d(n,t,(function(){return i[t]}))}(e);n["default"]=a.a},b49f:function(t,n,o){"use strict";o.d(n,"b",(function(){return i})),o.d(n,"c",(function(){return a})),o.d(n,"a",(function(){}));var i=function(){var t=this.$createElement;this._self._c},a=[]}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'chat_pages/components/chat/msglist/type/audio/audio-create-component',
    {
        'chat_pages/components/chat/msglist/type/audio/audio-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("0b96"))
        })
    },
    [['chat_pages/components/chat/msglist/type/audio/audio-create-component']]
]);
