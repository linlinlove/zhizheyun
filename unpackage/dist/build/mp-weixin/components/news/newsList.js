(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/news/newsList"],{"754a":function(t,e,n){},a86d:function(t,e,n){"use strict";n.d(e,"b",(function(){return a})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){}));var a=function(){var t=this.$createElement,e=(this._self._c,this.arr.length);this.$mp.data=Object.assign({},{$root:{g0:e}})},o=[]},ab9d:function(t,e,n){"use strict";var a=n("754a"),o=n.n(a);o.a},b698:function(t,e,n){"use strict";n.r(e);var a=n("a86d"),o=n("b962");for(var c in o)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return o[t]}))}(c);n("ab9d");var i=n("f0c5"),s=Object(i["a"])(o["default"],a["b"],a["c"],!1,null,"7d83f9a6",null,!1,a["a"],void 0);e["default"]=s.exports},b962:function(t,e,n){"use strict";n.r(e);var a=n("cecf"),o=n.n(a);for(var c in a)["default"].indexOf(c)<0&&function(t){n.d(e,t,(function(){return a[t]}))}(c);e["default"]=o.a},cecf:function(t,e,n){"use strict";(function(t){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var a=n("aafc"),o=n("9754")["default"],c={data:function(){return{search_btn:!0,search_chats:!1,show_mask:!1,yourname:"",unReadSpotNum:0,unReadNoticeNum:0,messageNum:0,unReadTotalNotNum:0,arr:[],show_clear:!1,member:"",isIPX:!1,gotop:!1,input_code:"",groupName:{},winSize:{},popButton:["删除该聊天"],showPop:!1,popStyle:"",currentVal:""}},created:function(){var e=this;this.setData({search_btn:!1,search_chats:!0,gotop:!0}),t.$on("clickSerach",(function(t){e.onSearch(t)})),t.$on("clickCancel",(function(t){e.cancel()}))},components:{swipeDelete:function(){n.e("components/swipedelete/swipedelete").then(function(){return resolve(n("5ceb"))}.bind(null,n)).catch(n.oe)},longPressModal:function(){n.e("components/longPressModal/index").then(function(){return resolve(n("2c079"))}.bind(null,n)).catch(n.oe)}},props:{},computed:{},methods:{loadFn:function(){console.log(1111),this.getWindowSize();var e=this;a.on("em.unreadspot",(function(n){e.getChatList(),e.setData({unReadSpotNum:getApp().globalData.unReadMessageNum>99?"99+":getApp().globalData.unReadMessageNum}),t.setTabBarBadge({index:3,text:e.unReadSpotNum.toString()}),0!=e.unReadSpotNum&&e.unReadSpotNum||t.hideTabBarRedDot({index:3})})),a.on("em.contacts.remove",(function(){e.getChatList(),e.getRoster()})),this.getRoster()},showFn:function(){console.log(222),t.hideHomeButton(),this.getChatList(),this.setData({unReadSpotNum:getApp().globalData.unReadMessageNum>99?"99+":getApp().globalData.unReadMessageNum,messageNum:getApp().globalData.saveFriendList.length,unReadNoticeNum:getApp().globalData.saveGroupInvitedList.length,unReadTotalNotNum:getApp().globalData.saveFriendList.length+getApp().globalData.saveGroupInvitedList.length}),getApp().globalData.isIPX&&this.setData({isIPX:!0})},listGroups:function(){var e=this;return o.conn.getGroup({limit:50,success:function(n){var a={},o=n.data||[];o.forEach((function(t){a[t.groupid]=t.groupname})),e.setData({groupName:a}),t.setStorage({key:"listGroup",data:n.data}),e.getChatList()},error:function(t){console.log(t)}})},getRoster:function(){var e=this,n={success:function(n){for(var o=[],c=0;c<n.length;c++)"both"==n[c].subscription&&o.push(n[c]);t.setStorage({key:"member",data:o}),e.setData({member:o}),e.listGroups(),a.fire("em.main.ready"),e.setData({arr:e.getChatList(),unReadSpotNum:getApp().globalData.unReadMessageNum>99?"99+":getApp().globalData.unReadMessageNum})},error:function(t){console.log(t)}};o.conn.getRoster(n)},getChatList:function(){var e=t.getStorageSync("myUsername"),n=this;function a(a,o){console.log(a,o);for(var c,i=[],s=o.length;s--;){var r=a.indexOf(o[s].slice(9));if(r>-1){var u=t.getStorageSync(a[r])||[];if(a.includes(),u.length){c=u[u.length-1],c.unReadCount=u.length,c.unReadCount>99&&(c.unReadCount="99+");var l=c.time.split(" ")[0].split("-"),g=c.time.split(" ")[1].split(":"),h=l[2]<10?"0"+l[2]:l[2];c.dateTimeNum="".concat(l[1]).concat(h).concat(g[0]).concat(g[1]).concat(g[2]),c.time="".concat(l[1],"月").concat(l[2],"日 ").concat(g[0],":").concat(g[1]),a.splice(r,1)}else{var p=t.getStorageSync(o[s]);if(p.length){c=p[p.length-1];var m=c.time.split(" ")[0].split("-"),d=c.time.split(" ")[1].split(":"),f=m[2]<10?"0"+m[2]:m[2];c.dateTimeNum="".concat(m[1]).concat(f).concat(d[0]).concat(d[1]).concat(d[2]),c.time="".concat(m[1],"月").concat(m[2],"日 ").concat(d[0],":").concat(d[1])}}}else{var v=t.getStorageSync(o[s]);if(v.length){c=v[v.length-1];var S=c.time.split(" ")[0].split("-"),y=c.time.split(" ")[1].split(":"),b=S[2]<10?"0"+S[2]:S[2];c.dateTimeNum="".concat(S[1]).concat(b).concat(y[0]).concat(y[1]).concat(y[2]),c.time="".concat(S[1],"月").concat(S[2],"日 ").concat(y[0],":").concat(y[1])}}!c||"groupchat"!=c.chatType&&"chatRoom"!=c.chatType||(c.groupName=n.groupName[c.info.to]),c&&c.username!=e&&i.push(c)}for(var N=a.length;N--;){var R=t.getStorageSync(a[N])||[];if(R.length){c=R[R.length-1],c.unReadCount=R.length,c.unReadCount>99&&(c.unReadCount="99+");var _=c.time.split(" ")[0].split("-"),w=c.time.split(" ")[1].split(":"),D=_[2]<10?"0"+_[2]:_[2];c.dateTimeNum="".concat(_[1]).concat(D).concat(w[0]).concat(w[1]).concat(w[2]),c.time="".concat(_[1],"月").concat(_[2],"日 ").concat(w[0],":").concat(w[1]),"groupchat"!=c.chatType&&"chatRoom"!=c.chatType||(c.groupName=n.groupName[c.info.to]),c.username!=e&&i.push(c)}}i.sort((function(t,e){return e.dateTimeNum-t.dateTimeNum})),this.setData({arr:i})}t.getStorageInfo({success:function(t){var o=t.keys,c=[],i=[],s=e.length;o.forEach((function(t){t.slice(-s)==e&&-1==t.indexOf("rendered_")?c.push(t):t.slice(-s)==e&&t.indexOf("rendered_")>-1?i.push(t):"INFORM"===t&&c.push(t)})),a.call(n,c,i)}})},openSearch:function(){this.setData({search_btn:!1,search_chats:!0,gotop:!0})},onSearch:function(e){var n=e;console.log(e);var a=t.getStorageSync("myUsername"),o=this,c=[],i=[];t.getStorageInfo({success:function(e){var s=e.keys,r=[],u=a.length;s.forEach((function(t){t.slice(-u)==a&&r.push(t)})),r.forEach((function(t,e){-1!=t.indexOf(n)&&c.push(t)}));var l="";c.forEach((function(e,n){var a=t.getStorageSync(e)||[];if(a.length){l=a[a.length-1];var o=l.time.split(" ")[0].split("-"),c=l.time.split(" ")[1].split(":"),s=o[2]<10?"0"+o[2]:o[2];l.dateTimeNum="".concat(o[1]).concat(s).concat(c[0]).concat(c[1]).concat(c[2]),l.time="".concat(o[1],"月").concat(o[2],"日 ").concat(c[0],":").concat(c[1]),i.push(l)}})),o.setData({arr:i})}})},cancel:function(){this.getChatList(),this.setData({search_btn:!0,search_chats:!1,unReadSpotNum:getApp().globalData.unReadMessageNum>99?"99+":getApp().globalData.unReadMessageNum,gotop:!1})},clearInput:function(){this.setData({input_code:"",show_clear:!1})},onInput:function(t){var e=t.detail.value;e?this.setData({show_clear:!0}):this.setData({show_clear:!1})},tab_contacts:function(){t.redirectTo({url:"../main/main?myName="+t.getStorageSync("myUsername")})},close_mask:function(){this.setData({search_btn:!0,search_chats:!1,show_mask:!1})},tab_setting:function(){t.redirectTo({url:"../setting/setting"})},tab_notification:function(){t.redirectTo({url:"../notification/notification"})},into_chatRoom:function(t){var e=t.currentTarget.dataset.item;this.into_singleChatRoom(e)},into_singleChatRoom:function(e){var n=t.getStorageSync("myUsername"),a={myName:n,your:e.username};t.navigateTo({url:"/chat_pages/chatroom/chatroom?username="+JSON.stringify(a)})},into_inform:function(){t.redirectTo({url:"../notification/notification"})},removeAndRefresh:function(e){var n,a=e.currentTarget.dataset.item.info.from,o=getApp().globalData.saveFriendList;o.length>0&&(o.forEach((function(t,e){t.from==a&&(n=e)})),getApp().globalData.saveFriendList.splice(n,1)),t.removeStorageSync("INFORM")},del_chat:function(e){console.log(">>>>>>>>删除会话列表",e);var n=e.currentTarget.dataset.item,o={},c=this;o="groupchat"==n.chatType||"chatRoom"==n.chatType?{your:n.info.to}:"INFORM"===n.chatType?{your:"INFORM"}:{your:n.username};var i=t.getStorageSync("myUsername");getCurrentPages();t.showModal({title:"确认删除？",confirmText:"删除",success:function(n){n.confirm&&(t.removeStorageSync(o.your+i),t.removeStorageSync("rendered_"+o.your+i),"INFORM"===o.your&&c.removeAndRefresh(e),a.fire("em.chat.session.remove"),c.getChatList())},fail:function(t){console.log("删除列表",t)}})},removeLocalStorage:function(e){console.log(">>>>>>>>执行删除本地会话");var n=t.getStorageSync("myUsername");t.removeStorageSync(e+n),t.removeStorageSync("rendered_"+e+n)},longpress:function(t){var e=this;this.currentVal=t;var n=[t.touches[0],"",t.currentTarget.dataset.index],a=n[0],o=n[1];o=a.clientY>this.winSize.height/2?"bottom:".concat(this.winSize.height-a.clientY,"px;"):"top:".concat(a.clientY,"px;"),a.clientX>this.winSize.witdh/2?o+="right:".concat(this.winSize.witdh-a.clientX,"px"):o+="left:".concat(a.clientX,"px"),this.popStyle=o,this.showShade=!0,this.$nextTick((function(){setTimeout((function(){e.showPop=!0}),10)}))},getWindowSize:function(){var e=this;t.getSystemInfo({success:function(t){e.winSize={witdh:t.windowWidth,height:t.windowHeight}}})},hidePop:function(){this.showPop=!1},pickerMenuChange:function(){console.log("当前选中>>",this.currentVal),this.del_chat(this.currentVal)}}};e.default=c}).call(this,n("543d")["default"])}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/news/newsList-create-component',
    {
        'components/news/newsList-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('543d')['createComponent'](__webpack_require__("b698"))
        })
    },
    [['components/news/newsList-create-component']]
]);
