{"version":3,"sources":["webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/components/news/newsList.vue?da3b","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/components/news/newsList.vue?2a8d","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/components/news/newsList.vue?8bb3","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/components/news/newsList.vue?8342","uni-app:///components/news/newsList.vue","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/components/news/newsList.vue?6029","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/components/news/newsList.vue?8b6b"],"names":["data","search_btn","search_chats","show_mask","yourname","unReadSpotNum","unReadNoticeNum","messageNum","unReadTotalNotNum","arr","show_clear","member","isIPX","gotop","input_code","groupName","winSize","popButton","showPop","popStyle","currentVal","created","uni","components","swipeDelete","longPressModal","props","computed","methods","loadFn","console","disp","me","index","text","showFn","getApp","listGroups","limit","success","listGroup","key","error","getRoster","WebIM","getChatList","storageKeys","newChatMsgKeys","item","historyChatMsgKeys","cul","lastChatMsg","dateArr","array","openSearch","onSearch","chatKeys","serchList","cancel","clearInput","onInput","tab_contacts","url","close_mask","tab_setting","tab_notification","into_chatRoom","into_singleChatRoom","myName","your","into_inform","removeAndRefresh","ary","idx","del_chat","nameList","title","confirmText","fail","removeLocalStorage","longpress","touches","style","setTimeout","getWindowSize","witdh","height","hidePop","pickerMenuChange"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiI;AACjI;AAC4D;AACL;AACsC;;;AAG7F;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,8EAAM;AACR,EAAE,+FAAM;AACR,EAAE,wGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACjBA;AAAA;AAAA;AAAA;AAAypB,CAAgB,8qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC0F7qB;AACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,eAIA;EACAA;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MAEAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;EACAC;IAAA;IACA;MACApB;MACAC;MACAW;IACA;IACAS;MACA;IACA;IACAA;MACA;IACA;EACA;EACAC;IACAC;IACAC;EACA;EACAC;EACAC,WAEA;EACAC;IACAC;MACAC;MACA;MAEA;;MAGA;MACAC;QACAC;QACAA;UACA;UACA3B,2DACA;QACA;QACAiB;UACAW;UACAC;QACA;QACA;UACAZ;YACAW;UACA;QACA;MACA;MAIAF;QACAC;QACAA;MACA;MAEA;IACA;IACAG;MACAL;MACAR;MACA;MACA;QACA;QACAjB,2DACA;QACAE;QACAD;QACAE,+DACA4B;MACA;MAEA;QACA;UACAxB;QACA;MACA;IACA;IACAyB;MACA;MACA;QACAC;QACAC;UACA;UACA;UACAC;YACAzB;UACA;UAEAiB;YACAjB;UACA;UACAO;YACAmB;YACAzC;UACA;UACAgC;QACA;QACAU;UACAZ;QACA;MACA;IACA;IAEAa;MACA;MACA;QACAJ;UACA;UACA;YACA;cACA5B;YACA;UACA;UACAW;YACAmB;YACAzC;UACA;UACAgC;YACArB;UACA;UACAqB;UACA;UACAD;UACA;UACA;UACAC;YACAvB;YACAJ,2DACA;UACA;QACA;QACAqC;UACAZ;QACA;MACA;MACAc;IACA;IAEA;IACAC;MACA;MACA;MACA;MACAvB;QACAiB;UACA;UACA;UACA;UACA;UACAO;YACA;cACAC;YACA,WACAC,8BACAA,gCACA;cACAC;YACA;cACAF;YACA;UACA;UAEAG;QACA;MACA;MAEA;QACApB;QACA;QACA;QAEA;UACA;UACA;YACA;YACA;YACA;cACAqB;cACAA;cACA;gBACAA;cACA;cACA;cACA;cACA;cACAA;cACAA;cACAJ;YACA;cACA;cACA;gBACAI;gBACA;gBACA;gBACA;gBACAA,oCACAC;gBACAD;cACA;YACA;UACA;YACA;YACA;cACAA;cACA;cACA;cACA;cACAA;cACAA;YACA;UACA;UACA,IACAA,gBACAA,uCACAA,qCACA;YACAA;UACA;UACAA,iDACAE;QACA;QAEA;UACA;UACA;YACAF;YACAA;YACA;cACAA;YACA;YACA;YACA;YACA;YACAA;YACAA;YACA,IACAA,uCACAA,oCACA;cACAA;YACA;YACAA;UACA;QACA;QAEAE;UACA;QACA;QACA;UACA5C;QACA;MACA;IACA;IAEA6C;MACA;QACArD;QACAC;QACAW;MACA;IACA;IAEA0C;MACA;MACAzB;MACA;MACA;MACA;MACA;MACA;MACAR;QACAiB;UACA;UACA;UACA;UACAO;YACA;cACAU;YACA;UACA;UACAA;YACA;cACAC;YACA;UACA;UACA;UACAA;YACA;YACA;cACAN;cAEA;cACA;cACA;cACAA,oCACAC;cACAD,6BACAC;cACA3C;YACA;UACA;UACAuB;YACAvB;UACA;QACA;MACA;IACA;IAEAiD;MACA;MACA;QACAzD;QACAC;QACA;QACAG,2DACA;QACAQ;MACA;IAEA;IACA8C;MACA;QACA7C;QACAJ;MACA;IACA;IACAkD;MACA;MACA;QACA;UACAlD;QACA;MACA;QACA;UACAA;QACA;MACA;IACA;IACAmD;MACAvC;QACAwC;MACA;IACA;IACAC;MACA;QACA9D;QACAC;QACAC;MACA;IACA;IACA6D;MACA1C;QACAwC;MACA;IACA;IACAG;MACA3C;QACAwC;MACA;IACA;IACAI;MACA;MACA;IACA;IACA;IACAC;MACA;MAEA;QACAC;QACAC;MACA;MACA/C;QACAwC;MACA;IACA;IACAQ;MACAhD;QACAwC;MACA;IACA;IAEAS;MACA;MACA;MACA;MACA;QACAC;UACA;YACAC;UACA;QACA;QACArC;MACA;MACAd;IACA;IAEAoD;MACA5C;MACA;MACA;MACA;MACA;MACA;QACA6C;UACAN;QACA;QACA;MACA;QACAM;UACAN;QACA;MACA;MACA;MAAA,KACA;QACAM;UACAN;QACA;MACA;MACA;MACA;MAEA/C;QACAsD;QACAC;QACAtC;UACA;YACAjB;YACAA;YACAqD;YACA;YACA;YACA;YACA5C;YACAC;UACA;QACA;QACA8C;UACAhD;QACA;MACA;IACA;IACAiD;MACAjD;MACA;MACAR;MACAA;IACA;IACA0D;MAAA;MACA;MACA;MACA;QAAAC;QAAAC;QAAAjD;;MAEA;MACA;QACAiD;MACA;QACAA;MACA;MACA;QACAA;MACA;QACAA;MACA;MAEA;MACA;MACA;MACA;QACAC;UACA;QACA;MACA;IACA;IACA,YACAC;MAAA;MACA9D;QACAiB;UACA;YACA8C;YACAC;UACA;QACA;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA1D;MACA;IACA;EACA;AACA;AAAA,2B;;;;;;;;;;;;;ACvmBA;AAAA;AAAA;AAAA;AAAwwC,CAAgB,quCAAG,EAAC,C;;;;;;;;;;;ACA5xC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"components/news/newsList.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./newsList.vue?vue&type=template&id=5cebb222&scoped=true&\"\nvar renderjs\nimport script from \"./newsList.vue?vue&type=script&lang=js&\"\nexport * from \"./newsList.vue?vue&type=script&lang=js&\"\nimport style0 from \"./newsList.vue?vue&type=style&index=0&id=5cebb222&lang=scss&scoped=true&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5cebb222\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"components/news/newsList.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./newsList.vue?vue&type=template&id=5cebb222&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.arr.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./newsList.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./newsList.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"current-card box-border\">\r\n\t\t<!-- <view class=\"chat_list_wraper\" > -->\r\n\t\t<scroll-view scroll-y=\"true\" :class=\"\r\n      'chat_list_wraper ' + (gotop ? (isIPX ? 'goTopX' : 'goTop') : 'goback')\r\n    \" :style=\"'padding-bottom: ' + (isIPX ? '270rpx' : '226rpx')\">\r\n\r\n\t\t\t<view v-for=\"(item, index) in arr\" :key=\"index\" class=\"chat_list box-border pt-re\" :data-item=\"item\"\r\n\t\t\t\t@tap.stop=\"del_chat\" @longpress=\"longpress\">\r\n\t\t\t\t<swipe-delete>\r\n\t\t\t\t\t<!-- 通知模块 -->\r\n\t\t\t\t\t<view class=\"tap_mask\" @tap.stop=\"into_inform\" :data-item=\"item\" v-if=\"item.chatType == 'INFORM'\">\r\n\t\t\t\t\t\t<view class=\"list_box\">\r\n\t\t\t\t\t\t\t<view class=\"list_left\">\r\n\t\t\t\t\t\t\t\t<view class=\"list_pic\">\r\n\t\t\t\t\t\t\t\t\t<view v-if=\"unReadTotalNotNum > 0\" class=\"em-unread-spot2\">{{unReadTotalNotNum}}</view>\r\n\t\t\t\t\t\t\t\t\t<image :class=\"unReadTotalNotNum > 0 ? 'haveSpot' : ''\"\r\n\t\t\t\t\t\t\t\t\t\tsrc=\"/static/images/inform.png\"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"list_text\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"list_user\"> 系统通知 </text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"list_word\"\r\n\t\t\t\t\t\t\t\t\t\tv-if=\"item.chatType == 'INFORM'\">申请通知来自：{{ item.info.from }}</text>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list_right\">\r\n\t\t\t\t\t\t\t\t<text :data-username=\"item.username\">{{ item.time }}</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\r\n\t\t\t\t\t<view class=\"tap_mask\" @tap.stop=\"into_chatRoom\" :data-item=\"item\" v-else>\r\n\t\t\t\t\t\t<!-- 消息列表 -->\r\n\t\t\t\t\t\t<view class=\"list_box\">\r\n\t\t\t\t\t\t\t<view class=\"list_left\" :data-username=\"item.username\">\r\n\t\t\t\t\t\t\t\t<view class=\"list_pic\">\r\n\t\t\t\t\t\t\t\t\t<view class=\"em-msgNum\" v-if=\"item.unReadCount > 0 || item.unReadCount == '99+'\">{{ item.unReadCount\r\n                  }}</view>\r\n\r\n\t\t\t\t\t\t\t\t\t<image :src=\"\r\n                    item.chatType == 'groupchat' ||\r\n                      item.chatType == 'chatRoom'\r\n                      ? '/chat_pages/images/groupTheme.png'\r\n                      : '/static/images/theme2x.png'\r\n                  \"></image>\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"list_text\">\r\n\t\t\t\t\t\t\t\t\t<text class=\"list_user\">{{\r\n                      item.chatType == \"groupchat\" ||\r\n                        item.chatType == \"chatRoom\" ||\r\n                        item.groupName\r\n                        ? item.groupName\r\n                        : item.username\r\n                  }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"list_word\" v-if=\"item.msg.data[0].data\">{{\r\n                      item.msg.data[0].data\r\n                  }}</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"list_word\" v-if=\"item.msg.type == 'img'\">[图片]</text>\r\n\t\t\t\t\t\t\t\t\t<text class=\"list_word\" v-if=\"item.msg.type == 'audio'\">[语音]</text>\r\n\t\t\t\t\t\t\t\t\t<!-- <text class=\"list_word\" v-if=\"item.msg.type == 'video'\"\r\n                    >[视频]</text\r\n                  > -->\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<view class=\"list_right\">\r\n\t\t\t\t\t\t\t\t<text :data-username=\"item.username\">{{ item.time }}</text>\r\n\t\t\t\t\t\t\t\t<text style=\"color: black;\">此处显示沟通岗位</text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</swipe-delete>\r\n\t\t\t</view>\r\n\r\n\t\t\t<long-press-modal :winSize=\"winSize\" :popButton=\"popButton\" @change=\"pickerMenuChange\" :showPop=\"showPop\"\r\n\t\t\t\t@hidePop=\"hidePop\" :popStyle=\"popStyle\" />\r\n\t\t\t<view v-if=\"arr.length == 0\" class=\"chat_noChat\">\r\n\t\t\t\t暂无消息\r\n\t\t\t</view>\r\n\t\t\t<!-- </view> -->\r\n\t\t</scroll-view>\r\n\t\t<!-- bug: margin-bottom 不生效 需要加一个空标签-->\r\n\t\t<view style=\"height: 1px\"></view>\r\n\r\n\t\t<view class=\"mask\" @tap=\"close_mask\" v-if=\"show_mask\"></view>\r\n\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\tlet disp = require(\"@/utils/broadcast\");\r\n\tvar WebIM = require(\"@/utils/WebIM\")[\"default\"];\r\n\tlet isfirstTime = true;\r\n\timport swipeDelete from \"@/components/swipedelete/swipedelete\";\r\n\timport longPressModal from \"@/components/longPressModal/index\";\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tsearch_btn: true,\r\n\t\t\t\tsearch_chats: false,\r\n\t\t\t\tshow_mask: false,\r\n\t\t\t\tyourname: \"\",\r\n\t\t\t\tunReadSpotNum: 0,\r\n\t\t\t\tunReadNoticeNum: 0,\r\n\t\t\t\tmessageNum: 0,\r\n\t\t\t\tunReadTotalNotNum: 0,\r\n\t\t\t\tarr: [],\r\n\t\t\t\tshow_clear: false,\r\n\t\t\t\tmember: \"\",\r\n\t\t\t\tisIPX: false,\r\n\t\t\t\tgotop: false,\r\n\t\t\t\tinput_code: \"\",\r\n\r\n\t\t\t\tgroupName: {},\r\n\t\t\t\twinSize: {},\r\n\t\t\t\tpopButton: [\"删除该聊天\"],\r\n\t\t\t\tshowPop: false,\r\n\t\t\t\tpopStyle: \"\",\r\n\t\t\t\tcurrentVal: ''\r\n\t\t\t};\r\n\t\t},\r\n\t\tcreated() {\r\n\t\t\tthis.setData({\r\n\t\t\t\tsearch_btn: false,\r\n\t\t\t\tsearch_chats: true,\r\n\t\t\t\tgotop: true,\r\n\t\t\t});\r\n\t\t\tuni.$on('clickSerach', n => {\r\n\t\t\t\tthis.onSearch(n)\r\n\t\t\t})\r\n\t\t\tuni.$on('clickCancel', n => {\r\n\t\t\t\tthis.cancel()\r\n\t\t\t})\r\n\t\t},\r\n\t\tcomponents: {\r\n\t\t\tswipeDelete,\r\n\t\t\tlongPressModal,\r\n\t\t},\r\n\t\tprops: {},\r\n\t\tcomputed: {\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tloadFn() {\r\n\t\t\t\tconsole.log(1111)\r\n\t\t\t\tthis.getWindowSize();\r\n\r\n\t\t\t\tlet me = this;\r\n\r\n\r\n\t\t\t\t//监听未读消息数\r\n\t\t\t\tdisp.on(\"em.unreadspot\", function(message) {\r\n\t\t\t\t\tme.getChatList();\r\n\t\t\t\t\tme.setData({\r\n\t\t\t\t\t\t// arr: me.getChatList(),\r\n\t\t\t\t\t\tunReadSpotNum: getApp().globalData.unReadMessageNum > 99 ?\r\n\t\t\t\t\t\t\t\"99+\" : getApp().globalData.unReadMessageNum,\r\n\t\t\t\t\t});\r\n\t\t\t\t\tuni.setTabBarBadge({\r\n\t\t\t\t\t\tindex: 3,\r\n\t\t\t\t\t\ttext: me.unReadSpotNum.toString()\r\n\t\t\t\t\t})\r\n\t\t\t\t\tif (me.unReadSpotNum == 0 || !me.unReadSpotNum) {\r\n\t\t\t\t\t\tuni.hideTabBarRedDot({\r\n\t\t\t\t\t\t\tindex: 3,\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\r\n\r\n\t\t\t\tdisp.on(\"em.contacts.remove\", function() {\r\n\t\t\t\t\tme.getChatList();\r\n\t\t\t\t\tme.getRoster();\r\n\t\t\t\t});\r\n\r\n\t\t\t\tthis.getRoster();\r\n\t\t\t},\r\n\t\t\tshowFn() {\r\n\t\t\t\tconsole.log(222)\r\n\t\t\t\tuni.hideHomeButton();\r\n\t\t\t\tthis.getChatList();\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\t//arr: this.getChatList(),\r\n\t\t\t\t\tunReadSpotNum: getApp().globalData.unReadMessageNum > 99 ?\r\n\t\t\t\t\t\t\"99+\" : getApp().globalData.unReadMessageNum,\r\n\t\t\t\t\tmessageNum: getApp().globalData.saveFriendList.length,\r\n\t\t\t\t\tunReadNoticeNum: getApp().globalData.saveGroupInvitedList.length,\r\n\t\t\t\t\tunReadTotalNotNum: getApp().globalData.saveFriendList.length +\r\n\t\t\t\t\t\tgetApp().globalData.saveGroupInvitedList.length,\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (getApp().globalData.isIPX) {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tisIPX: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tlistGroups() {\r\n\t\t\t\tvar me = this;\r\n\t\t\t\treturn WebIM.conn.getGroup({\r\n\t\t\t\t\tlimit: 50,\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet groupName = {};\r\n\t\t\t\t\t\tlet listGroup = res.data || [];\r\n\t\t\t\t\t\tlistGroup.forEach((item) => {\r\n\t\t\t\t\t\t\tgroupName[item.groupid] = item.groupname;\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tme.setData({\r\n\t\t\t\t\t\t\tgroupName: groupName,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\tkey: \"listGroup\",\r\n\t\t\t\t\t\t\tdata: res.data,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tme.getChatList();\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror: function(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tgetRoster() {\r\n\t\t\t\tlet me = this;\r\n\t\t\t\tlet rosters = {\r\n\t\t\t\t\tsuccess(roster) {\r\n\t\t\t\t\t\tvar member = [];\r\n\t\t\t\t\t\tfor (let i = 0; i < roster.length; i++) {\r\n\t\t\t\t\t\t\tif (roster[i].subscription == \"both\") {\r\n\t\t\t\t\t\t\t\tmember.push(roster[i]);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tuni.setStorage({\r\n\t\t\t\t\t\t\tkey: \"member\",\r\n\t\t\t\t\t\t\tdata: member,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tme.setData({\r\n\t\t\t\t\t\t\tmember: member\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tme.listGroups();\r\n\t\t\t\t\t\t//if(!systemReady){\r\n\t\t\t\t\t\tdisp.fire(\"em.main.ready\");\r\n\t\t\t\t\t\t//systemReady = true;\r\n\t\t\t\t\t\t//}\r\n\t\t\t\t\t\tme.setData({\r\n\t\t\t\t\t\t\tarr: me.getChatList(),\r\n\t\t\t\t\t\t\tunReadSpotNum: getApp().globalData.unReadMessageNum > 99 ?\r\n\t\t\t\t\t\t\t\t\"99+\" : getApp().globalData.unReadMessageNum,\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\terror(err) {\r\n\t\t\t\t\t\tconsole.log(err);\r\n\t\t\t\t\t},\r\n\t\t\t\t};\r\n\t\t\t\tWebIM.conn.getRoster(rosters);\r\n\t\t\t},\r\n\r\n\t\t\t// 包含陌生人版本\r\n\t\t\tgetChatList() {\r\n\t\t\t\tvar myName = uni.getStorageSync(\"myUsername\");\r\n\t\t\t\tvar array = [];\r\n\t\t\t\tconst me = this;\r\n\t\t\t\tuni.getStorageInfo({\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet storageKeys = res.keys;\r\n\t\t\t\t\t\tlet newChatMsgKeys = [];\r\n\t\t\t\t\t\tlet historyChatMsgKeys = [];\r\n\t\t\t\t\t\tlet len = myName.length;\r\n\t\t\t\t\t\tstorageKeys.forEach((item) => {\r\n\t\t\t\t\t\t\tif (item.slice(-len) == myName && item.indexOf(\"rendered_\") == -1) {\r\n\t\t\t\t\t\t\t\tnewChatMsgKeys.push(item);\r\n\t\t\t\t\t\t\t} else if (\r\n\t\t\t\t\t\t\t\titem.slice(-len) == myName &&\r\n\t\t\t\t\t\t\t\titem.indexOf(\"rendered_\") > -1\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\thistoryChatMsgKeys.push(item);\r\n\t\t\t\t\t\t\t} else if (item === \"INFORM\") {\r\n\t\t\t\t\t\t\t\tnewChatMsgKeys.push(item);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tcul.call(me, newChatMsgKeys, historyChatMsgKeys);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\tfunction cul(newChatMsgKeys, historyChatMsgKeys) {\r\n\t\t\t\t\tconsole.log(newChatMsgKeys, historyChatMsgKeys)\r\n\t\t\t\t\tlet array = [];\r\n\t\t\t\t\tlet lastChatMsg;\r\n\r\n\t\t\t\t\tfor (let i = historyChatMsgKeys.length; i > 0, i--;) {\r\n\t\t\t\t\t\tlet index = newChatMsgKeys.indexOf(historyChatMsgKeys[i].slice(9));\r\n\t\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\t\tlet newChatMsgs = uni.getStorageSync(newChatMsgKeys[index]) || [];\r\n\t\t\t\t\t\t\tif (newChatMsgKeys.includes()) {}\r\n\t\t\t\t\t\t\tif (newChatMsgs.length) {\r\n\t\t\t\t\t\t\t\tlastChatMsg = newChatMsgs[newChatMsgs.length - 1];\r\n\t\t\t\t\t\t\t\tlastChatMsg.unReadCount = newChatMsgs.length;\r\n\t\t\t\t\t\t\t\tif (lastChatMsg.unReadCount > 99) {\r\n\t\t\t\t\t\t\t\t\tlastChatMsg.unReadCount = \"99+\";\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tlet dateArr = lastChatMsg.time.split(\" \")[0].split(\"-\");\r\n\t\t\t\t\t\t\t\tlet timeArr = lastChatMsg.time.split(\" \")[1].split(\":\");\r\n\t\t\t\t\t\t\t\tlet month = dateArr[2] < 10 ? \"0\" + dateArr[2] : dateArr[2];\r\n\t\t\t\t\t\t\t\tlastChatMsg.dateTimeNum = `${dateArr[1]}${month}${timeArr[0]}${timeArr[1]}${timeArr[2]}`;\r\n\t\t\t\t\t\t\t\tlastChatMsg.time = `${dateArr[1]}月${dateArr[2]}日 ${timeArr[0]}:${timeArr[1]}`;\r\n\t\t\t\t\t\t\t\tnewChatMsgKeys.splice(index, 1);\r\n\t\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\t\tlet historyChatMsgs = uni.getStorageSync(historyChatMsgKeys[i]);\r\n\t\t\t\t\t\t\t\tif (historyChatMsgs.length) {\r\n\t\t\t\t\t\t\t\t\tlastChatMsg = historyChatMsgs[historyChatMsgs.length - 1];\r\n\t\t\t\t\t\t\t\t\tlet dateArr = lastChatMsg.time.split(\" \")[0].split(\"-\");\r\n\t\t\t\t\t\t\t\t\tlet timeArr = lastChatMsg.time.split(\" \")[1].split(\":\");\r\n\t\t\t\t\t\t\t\t\tlet month = dateArr[2] < 10 ? \"0\" + dateArr[2] : dateArr[2];\r\n\t\t\t\t\t\t\t\t\tlastChatMsg.dateTimeNum =\r\n\t\t\t\t\t\t\t\t\t\t`${dateArr[1]}${month}${timeArr[0]}${timeArr[1]}${timeArr[2]}`;\r\n\t\t\t\t\t\t\t\t\tlastChatMsg.time = `${dateArr[1]}月${dateArr[2]}日 ${timeArr[0]}:${timeArr[1]}`;\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tlet historyChatMsgs = uni.getStorageSync(historyChatMsgKeys[i]);\r\n\t\t\t\t\t\t\tif (historyChatMsgs.length) {\r\n\t\t\t\t\t\t\t\tlastChatMsg = historyChatMsgs[historyChatMsgs.length - 1];\r\n\t\t\t\t\t\t\t\tlet dateArr = lastChatMsg.time.split(\" \")[0].split(\"-\");\r\n\t\t\t\t\t\t\t\tlet timeArr = lastChatMsg.time.split(\" \")[1].split(\":\");\r\n\t\t\t\t\t\t\t\tlet month = dateArr[2] < 10 ? \"0\" + dateArr[2] : dateArr[2];\r\n\t\t\t\t\t\t\t\tlastChatMsg.dateTimeNum = `${dateArr[1]}${month}${timeArr[0]}${timeArr[1]}${timeArr[2]}`;\r\n\t\t\t\t\t\t\t\tlastChatMsg.time = `${dateArr[1]}月${dateArr[2]}日 ${timeArr[0]}:${timeArr[1]}`;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\tlastChatMsg &&\r\n\t\t\t\t\t\t\t(lastChatMsg.chatType == \"groupchat\" ||\r\n\t\t\t\t\t\t\t\tlastChatMsg.chatType == \"chatRoom\")\r\n\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\tlastChatMsg.groupName = me.groupName[lastChatMsg.info.to];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlastChatMsg && lastChatMsg.username != myName &&\r\n\t\t\t\t\t\t\tarray.push(lastChatMsg);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tfor (let i = newChatMsgKeys.length; i > 0, i--;) {\r\n\t\t\t\t\t\tlet newChatMsgs = uni.getStorageSync(newChatMsgKeys[i]) || [];\r\n\t\t\t\t\t\tif (newChatMsgs.length) {\r\n\t\t\t\t\t\t\tlastChatMsg = newChatMsgs[newChatMsgs.length - 1];\r\n\t\t\t\t\t\t\tlastChatMsg.unReadCount = newChatMsgs.length;\r\n\t\t\t\t\t\t\tif (lastChatMsg.unReadCount > 99) {\r\n\t\t\t\t\t\t\t\tlastChatMsg.unReadCount = \"99+\";\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlet dateArr = lastChatMsg.time.split(\" \")[0].split(\"-\");\r\n\t\t\t\t\t\t\tlet timeArr = lastChatMsg.time.split(\" \")[1].split(\":\");\r\n\t\t\t\t\t\t\tlet month = dateArr[2] < 10 ? \"0\" + dateArr[2] : dateArr[2];\r\n\t\t\t\t\t\t\tlastChatMsg.dateTimeNum = `${dateArr[1]}${month}${timeArr[0]}${timeArr[1]}${timeArr[2]}`;\r\n\t\t\t\t\t\t\tlastChatMsg.time = `${dateArr[1]}月${dateArr[2]}日 ${timeArr[0]}:${timeArr[1]}`;\r\n\t\t\t\t\t\t\tif (\r\n\t\t\t\t\t\t\t\tlastChatMsg.chatType == \"groupchat\" ||\r\n\t\t\t\t\t\t\t\tlastChatMsg.chatType == \"chatRoom\"\r\n\t\t\t\t\t\t\t) {\r\n\t\t\t\t\t\t\t\tlastChatMsg.groupName = me.groupName[lastChatMsg.info.to];\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tlastChatMsg.username != myName && array.push(lastChatMsg);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tarray.sort((a, b) => {\r\n\t\t\t\t\t\treturn b.dateTimeNum - a.dateTimeNum;\r\n\t\t\t\t\t});\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tarr: array,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\topenSearch: function() {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tsearch_btn: false,\r\n\t\t\t\t\tsearch_chats: true,\r\n\t\t\t\t\tgotop: true,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tonSearch: function(val) {\r\n\t\t\t\tlet searchValue = val;\r\n\t\t\t\tconsole.log(val)\r\n\t\t\t\t// let searchValue = val.detail.value;\r\n\t\t\t\tvar myName = uni.getStorageSync(\"myUsername\");\r\n\t\t\t\tconst me = this;\r\n\t\t\t\tlet serchList = [];\r\n\t\t\t\tlet arr = [];\r\n\t\t\t\tuni.getStorageInfo({\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tlet storageKeys = res.keys;\r\n\t\t\t\t\t\tlet chatKeys = [];\r\n\t\t\t\t\t\tlet len = myName.length;\r\n\t\t\t\t\t\tstorageKeys.forEach((item) => {\r\n\t\t\t\t\t\t\tif (item.slice(-len) == myName) {\r\n\t\t\t\t\t\t\t\tchatKeys.push(item);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tchatKeys.forEach((item, index) => {\r\n\t\t\t\t\t\t\tif (item.indexOf(searchValue) != -1) {\r\n\t\t\t\t\t\t\t\tserchList.push(item);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tlet lastChatMsg = \"\";\r\n\t\t\t\t\t\tserchList.forEach((item, index) => {\r\n\t\t\t\t\t\t\tlet chatMsgs = uni.getStorageSync(item) || [];\r\n\t\t\t\t\t\t\tif (chatMsgs.length) {\r\n\t\t\t\t\t\t\t\tlastChatMsg = chatMsgs[chatMsgs.length - 1];\r\n\r\n\t\t\t\t\t\t\t\tlet dateArr = lastChatMsg.time.split(\" \")[0].split(\"-\");\r\n\t\t\t\t\t\t\t\tlet timeArr = lastChatMsg.time.split(\" \")[1].split(\":\");\r\n\t\t\t\t\t\t\t\tlet month = dateArr[2] < 10 ? \"0\" + dateArr[2] : dateArr[2];\r\n\t\t\t\t\t\t\t\tlastChatMsg.dateTimeNum =\r\n\t\t\t\t\t\t\t\t\t`${dateArr[1]}${month}${timeArr[0]}${timeArr[1]}${timeArr[2]}`;\r\n\t\t\t\t\t\t\t\tlastChatMsg.time =\r\n\t\t\t\t\t\t\t\t\t`${dateArr[1]}月${dateArr[2]}日 ${timeArr[0]}:${timeArr[1]}`;\r\n\t\t\t\t\t\t\t\tarr.push(lastChatMsg);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t\tme.setData({\r\n\t\t\t\t\t\t\tarr\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tcancel: function() {\r\n\t\t\t\tthis.getChatList();\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tsearch_btn: true,\r\n\t\t\t\t\tsearch_chats: false,\r\n\t\t\t\t\t//arr: this.getChatList(),\r\n\t\t\t\t\tunReadSpotNum: getApp().globalData.unReadMessageNum > 99 ?\r\n\t\t\t\t\t\t\"99+\" : getApp().globalData.unReadMessageNum,\r\n\t\t\t\t\tgotop: false,\r\n\t\t\t\t});\r\n\r\n\t\t\t},\r\n\t\t\tclearInput: function() {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tinput_code: \"\",\r\n\t\t\t\t\tshow_clear: false,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tonInput: function(e) {\r\n\t\t\t\tlet inputValue = e.detail.value;\r\n\t\t\t\tif (inputValue) {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tshow_clear: true,\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tshow_clear: false,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttab_contacts: function() {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: \"../main/main?myName=\" + uni.getStorageSync(\"myUsername\"),\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tclose_mask: function() {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tsearch_btn: true,\r\n\t\t\t\t\tsearch_chats: false,\r\n\t\t\t\t\tshow_mask: false,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttab_setting: function() {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: \"../setting/setting\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\ttab_notification: function() {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: \"../notification/notification\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinto_chatRoom: function(event) {\r\n\t\t\t\tlet detail = event.currentTarget.dataset.item;\r\n\t\t\t\tthis.into_singleChatRoom(detail);\r\n\t\t\t},\r\n\t\t\t// 单聊\r\n\t\t\tinto_singleChatRoom: function(detail) {\r\n\t\t\t\tvar my = uni.getStorageSync(\"myUsername\");\r\n\r\n\t\t\t\tvar nameList = {\r\n\t\t\t\t\tmyName: my,\r\n\t\t\t\t\tyour: detail.username,\r\n\t\t\t\t};\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: \"/chat_pages/chatroom/chatroom?username=\" + JSON.stringify(nameList),\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tinto_inform: function() {\r\n\t\t\t\tuni.redirectTo({\r\n\t\t\t\t\turl: \"../notification/notification\",\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tremoveAndRefresh: function(event) {\r\n\t\t\t\tlet removeId = event.currentTarget.dataset.item.info.from\r\n\t\t\t\tlet ary = getApp().globalData.saveFriendList\r\n\t\t\t\tlet idx\r\n\t\t\t\tif (ary.length > 0) {\r\n\t\t\t\t\tary.forEach((v, k) => {\r\n\t\t\t\t\t\tif (v.from == removeId) {\r\n\t\t\t\t\t\t\tidx = k\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t\tgetApp().globalData.saveFriendList.splice(idx, 1);\r\n\t\t\t\t}\r\n\t\t\t\tuni.removeStorageSync('INFORM')\r\n\t\t\t},\r\n\r\n\t\t\tdel_chat: function(event) {\r\n\t\t\t\tconsole.log('>>>>>>>>删除会话列表', event)\r\n\t\t\t\tlet detail = event.currentTarget.dataset.item;\r\n\t\t\t\tlet nameList = {};\r\n\t\t\t\tlet me = this;\r\n\t\t\t\t// 删除当前选中群组聊天列表\r\n\t\t\t\tif (detail.chatType == \"groupchat\" || detail.chatType == \"chatRoom\") {\r\n\t\t\t\t\tnameList = {\r\n\t\t\t\t\t\tyour: detail.info.to,\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//删除当前选中通知列表\r\n\t\t\t\t} else if (detail.chatType === \"INFORM\") {\r\n\t\t\t\t\tnameList = {\r\n\t\t\t\t\t\tyour: \"INFORM\",\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\t//删除当前选中好友聊天列表\r\n\t\t\t\telse {\r\n\t\t\t\t\tnameList = {\r\n\t\t\t\t\t\tyour: detail.username,\r\n\t\t\t\t\t};\r\n\t\t\t\t}\r\n\t\t\t\tvar myName = uni.getStorageSync(\"myUsername\");\r\n\t\t\t\tvar currentPage = getCurrentPages();\r\n\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: \"确认删除？\",\r\n\t\t\t\t\tconfirmText: \"删除\",\r\n\t\t\t\t\tsuccess: function(res) {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\tuni.removeStorageSync(nameList.your + myName);\r\n\t\t\t\t\t\t\tuni.removeStorageSync(\"rendered_\" + nameList.your + myName);\r\n\t\t\t\t\t\t\tnameList.your === 'INFORM' && me.removeAndRefresh(event);\r\n\t\t\t\t\t\t\t// if (Object.keys(currentPage[0]).length>0) {\r\n\t\t\t\t\t\t\t//   currentPage[0].onShow();\r\n\t\t\t\t\t\t\t// }\r\n\t\t\t\t\t\t\tdisp.fire(\"em.chat.session.remove\");\r\n\t\t\t\t\t\t\tme.getChatList();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail: function(err) {\r\n\t\t\t\t\t\tconsole.log('删除列表', err);\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tremoveLocalStorage: function(yourname) {\r\n\t\t\t\tconsole.log('>>>>>>>>执行删除本地会话')\r\n\t\t\t\tvar myName = uni.getStorageSync(\"myUsername\");\r\n\t\t\t\tuni.removeStorageSync(yourname + myName);\r\n\t\t\t\tuni.removeStorageSync(\"rendered_\" + yourname + myName);\r\n\t\t\t},\r\n\t\t\tlongpress: function(e) {\r\n\t\t\t\t//将当前选中的值存在data中方便后续操作\r\n\t\t\t\tthis.currentVal = e\r\n\t\t\t\tlet [touches, style, index] = [e.touches[0], \"\", e.currentTarget.dataset.index, ];\r\n\r\n\t\t\t\t/* 因 非H5端不兼容 style 属性绑定 Object ，所以拼接字符 */\r\n\t\t\t\tif (touches.clientY > this.winSize.height / 2) {\r\n\t\t\t\t\tstyle = `bottom:${this.winSize.height - touches.clientY}px;`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle = `top:${touches.clientY}px;`;\r\n\t\t\t\t}\r\n\t\t\t\tif (touches.clientX > this.winSize.witdh / 2) {\r\n\t\t\t\t\tstyle += `right:${this.winSize.witdh - touches.clientX}px`;\r\n\t\t\t\t} else {\r\n\t\t\t\t\tstyle += `left:${touches.clientX}px`;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.popStyle = style;\r\n\t\t\t\t// this.pickerUserIndex = Number(index);\r\n\t\t\t\tthis.showShade = true;\r\n\t\t\t\tthis.$nextTick(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.showPop = true;\r\n\t\t\t\t\t}, 10);\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\t/* 获取窗口尺寸 */\r\n\t\t\tgetWindowSize() {\r\n\t\t\t\tuni.getSystemInfo({\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tthis.winSize = {\r\n\t\t\t\t\t\t\twitdh: res.windowWidth,\r\n\t\t\t\t\t\t\theight: res.windowHeight,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\thidePop() {\r\n\t\t\t\tthis.showPop = false;\r\n\t\t\t},\r\n\t\t\tpickerMenuChange() {\r\n\t\t\t\tconsole.log(\"当前选中>>\", this.currentVal);\r\n\t\t\t\tthis.del_chat(this.currentVal)\r\n\t\t\t},\r\n\t\t},\r\n\t};\r\n</script>\r\n<style lang=\"scss\" scoped>\r\n\tpage {\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.chat_title {\r\n\t\tposition: fixed;\r\n\t\tbackground-color: #fff;\r\n\t\twidth: 100%;\r\n\t\tz-index: 9;\r\n\t\ttop: 0;\r\n\t\theight: 128rpx;\r\n\t}\r\n\r\n\t.chat_title text {\r\n\t\tline-height: 96rpx;\r\n\t\tfont-size: 64rpx;\r\n\t\tfont-weight: 400;\r\n\t\tmargin-left: 32rpx;\r\n\t}\r\n\r\n\t.search,\r\n\t.search_input {\r\n\t\twidth: 100%;\r\n\t\theight: 88rpx;\r\n\t\tbackground-color: #f2f2f2;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t}\r\n\r\n\r\n\t.search {\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\r\n\t.search_input {\r\n\t\tjustify-content: space-around;\r\n\t}\r\n\r\n\t.search view,\r\n\t.search_input view {\r\n\t\theight: 64rpx;\r\n\t\tline-height: 64rpx;\r\n\t\tbackground-color: #fff;\r\n\t\tborder-radius: 17px;\r\n\t\ttext-align: center;\r\n\t\tdisplay: flex;\r\n\t\talign-items: center;\r\n\t\tmargin: 0 32rpx;\r\n\t}\r\n\r\n\t.search view {\r\n\t\twidth: 100%;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t\tbackground-color: #fff;\r\n\t}\r\n\r\n\t.search image {\r\n\t\tdisplay: block;\r\n\t\twidth: 5%;\r\n\t\theight: 50%;\r\n\t}\r\n\r\n\t.search_input view {\r\n\t\tpadding-left: 24rpx;\r\n\t\ttext-align: left;\r\n\t\tflex: 1;\r\n\t\tmargin: 0 28rpx 0 32rpx;\r\n\t}\r\n\r\n\t.search icon,\r\n\t.search_input icon {\r\n\t\tdisplay: inline-block;\r\n\t\tmargin: 8rpx 12rpx 0;\r\n\t\tfont-size: 24rpx;\r\n\t}\r\n\r\n\t.search text {\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #9B9B9B;\r\n\t}\r\n\r\n\t.search_input text {\r\n\t\tdisplay: inline-block;\r\n\t\theight: 60rpx;\r\n\t\tline-height: 60rpx;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #0873DE;\r\n\t\tmargin-right: 32rpx;\r\n\t}\r\n\r\n\t.search_input input {\r\n\t\tfont-size: 28rpx;\r\n\t\twidth: 90%;\r\n\t}\r\n\r\n\t.mask {\r\n\t\tbackground-color: black;\r\n\t\topacity: 0.4;\r\n\t\tposition: fixed;\r\n\t\ttop: 80rpx;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t}\r\n\r\n\t.chat_list_wraper {\r\n\t\tpadding-bottom: 270rpx;\r\n\t\tbox-sizing: border-box;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.chat_list {\r\n\t\twidth: 100%;\r\n\t\theight: 128rpx;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.tap_mask {\r\n\t\twidth: 100%;\r\n\t\toverflow: hidden;\r\n\t}\r\n\r\n\t.list_box {\r\n\t\tmargin: 0 32rpx;\r\n\t\theight: 126rpx;\r\n\t\tborder-bottom: 0.5px #E5E5E5 solid;\r\n\t\tdisplay: flex;\r\n\t}\r\n\r\n\t.list_left {\r\n\t\twidth: 63%;\r\n\t\theight: 100%;\r\n\t\tfloat: left;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\talign-items: center;\r\n\t\tflex: 1;\r\n\t}\r\n\r\n\t.list_text {\r\n\t\twidth: 60%;\r\n\t\theight: 100%;\r\n\t\tfloat: left;\r\n\t\tfont-size: 28rpx;\r\n\t}\r\n\r\n\t.list_pic {\r\n\t\tmargin-right: 20rpx;\r\n\t}\r\n\r\n\t.list_pic image {\r\n\t\tdisplay: block;\r\n\t\twidth: 88rpx;\r\n\t\theight: 88rpx;\r\n\t}\r\n\r\n\t.list_user,\r\n\t.list_user2 {\r\n\t\tfont-size: 34rpx;\r\n\t\tcolor: #000;\r\n\t\tposition: relative;\r\n\t\ttop: 22rpx;\r\n\t\toverflow: hidden;\r\n\t\twidth: 350rpx;\r\n\t\tdisplay: inline-block;\r\n\t\ttext-overflow: ellipsis;\r\n\t}\r\n\r\n\t.list_user2 {\r\n\t\ttop: 40rpx !important;\r\n\t}\r\n\r\n\t.em-msgNum {\r\n\t\tcolor: #FFFFFF;\r\n\t\tbackground: #FF5656;\r\n\t\tborder-radius: 100%;\r\n\t\tposition: absolute;\r\n\t\tright: 30upx;\r\n\t\tbottom: 20upx;\r\n\t\tdisplay: inline-block;\r\n\t\twidth: 48upx;\r\n\t\theight: 48upx;\r\n\t\tline-height: 48upx;\r\n\t\tfont-size: 24upx;\r\n\t\ttext-align: center;\r\n\t\tbox-sizing: border-box;\r\n\t}\r\n\r\n\t.list_word {\r\n\t\theight: 40rpx;\r\n\t\tdisplay: block;\r\n\t\tmargin-top: 0;\r\n\t\toverflow: hidden;\r\n\t\ttext-overflow: ellipsis;\r\n\t\twhite-space: nowrap;\r\n\t\tposition: absolute;\r\n\t\twidth: 70%;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #9B9B9B;\r\n\t\ttop: 66rpx;\r\n\t}\r\n\r\n\t.list_right {\r\n\t\twidth: 240rpx;\r\n\t\theight: 100%;\r\n\t\tfloat: right;\r\n\t\tfont-size: 24rpx;\r\n\t\ttext-align: right;\r\n\t}\r\n\r\n\t.list_right text:first-child {\r\n\t\tdisplay: block;\r\n\t\tline-height: 60rpx;\r\n\t\tmargin: 12rpx auto auto auto;\r\n\t}\r\n\r\n\t.list_right text:last-child {\r\n\t\theight: 40rpx;\r\n\t\tfont-size: 26rpx;\r\n\t\tcolor: #CFCFCF;\r\n\t\tdisplay: block;\r\n\t\tmargin-top: 4rpx;\r\n\t}\r\n\r\n\t.chat_noChat {\r\n\t\ttext-align: center;\r\n\t\tfont-size: 30rpx;\r\n\t\tcolor: #9B9B9B;\r\n\t\tmargin-top: 400rpx;\r\n\t}\r\n\r\n\t.ctbg {\r\n\t\twidth: 138px;\r\n\t\theight: 106px;\r\n\t\tdisplay: block;\r\n\t\tmargin: 20rpx auto;\r\n\t}\r\n\r\n\t.current-card {\r\n\t\tbackground-color: #fff;\r\n\t\twidth: 100%;\r\n\t\tmin-height: calc(100vh - 132upx);\r\n\t\tposition: relative;\r\n\t\ttop: -40upx;\r\n\t\tborder-radius: 40upx 40upx 0 0;\r\n\t\tpadding: 30upx 0 0;\r\n\t}\r\n</style>","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./newsList.vue?vue&type=style&index=0&id=5cebb222&lang=scss&scoped=true&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./newsList.vue?vue&type=style&index=0&id=5cebb222&lang=scss&scoped=true&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1709705868041\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}