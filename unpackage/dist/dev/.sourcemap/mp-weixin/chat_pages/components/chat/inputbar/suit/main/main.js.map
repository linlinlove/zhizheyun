{"version":3,"sources":["webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/inputbar/suit/main/main.vue?28b4","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/inputbar/suit/main/main.vue?4457","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/inputbar/suit/main/main.vue?b33d","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/inputbar/suit/main/main.vue?801f","uni-app:///chat_pages/components/chat/inputbar/suit/main/main.vue","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/inputbar/suit/main/main.vue?c421","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/inputbar/suit/main/main.vue?4882"],"names":["data","inputMessage","userMessage","isIPX","components","props","username","type","default","chatType","created","console","WebIM","user","pwd","appkey","beforeMount","moved","destroyed","mounted","methods","focus","bubbles","blur","isGroupChat","getSendToParam","bindMessage","emojiAction","str","sendMessage","String","msg","from","to","success","me","disp","fail","uni","saveSendMsg","msgStorage","openEmoji","openRecordModal","openFunModal"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAiH;AACjH;AACwD;AACL;AACa;;;AAGhE;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,0EAAM;AACR,EAAE,+EAAM;AACR,EAAE,wFAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,mFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAqpB,CAAgB,0qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACwBzqB;AACA;AACA;AACA;AAAA,gBAEA;EACAA;IACA;MACAC;MACA;MACAC;MAAA;MACAC;IACA;EACA;EAEAC;EACAC;IACAC;MACAC;MACAC;QAAA;MAAA;IACA;IACAC;MACAF;MACAC;IACA;EACA;EAEA;EACAE;IACA;MACAP;IACA;IACAQ;IACA;MACA;MACAC;QACAC;QACAC;QACAC;MACA;IACA;EACA;EACAC;EAEAC;EAEAC;EAEAC;EAEAC;IACAC;MACA;QACAC;MACA;IACA;IACAC;MACA;QACAD;MACA;IACA;IAEAE;MACA;IACA;IAEAC;MACA;IACA;IAEAC;MACA;QACAxB;MACA;IACA;IAEAyB;MACA;MACA;MAEA;QACAC;MACA;QACA;QACA;QACA;QAEA;UACAA;QACA;UACAA;QACA;MACA;MACA;MACA;IACA;IAEAC;MACA;MACAC;QACA;MACA;MACA;QACA;MACA;MACA;MACA;MACAC;QACAA;QACAC;QACAC;QACA;QACAxB;QACAyB;UACAvB;UACA;UACAwB;UACAA;UACAC;QACA;QACAC;UACA1B;QACA;MACA;MAEA;QACA;QACAoB;MACA;MACAnB;MACA;QACAmB;QACAxB;MACA;MACA;MACA;MACA;MACA+B;IACA;IAEAC;MACA5B;MACA6B;IACA;IAEAC;MACA;IACA;IACAC;MACA;IACA;IACAC;MACA;IACA;EACA;AACA;AAAA,4B;;;;;;;;;;;;;ACnLA;AAAA;AAAA;AAAA;AAA67B,CAAgB,u7BAAG,EAAC,C;;;;;;;;;;;ACAj9B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"chat_pages/components/chat/inputbar/suit/main/main.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./main.vue?vue&type=template&id=f3dc4c5e&\"\nvar renderjs\nimport script from \"./main.vue?vue&type=script&lang=js&\"\nexport * from \"./main.vue?vue&type=script&lang=js&\"\nimport style0 from \"./main.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"chat_pages/components/chat/inputbar/suit/main/main.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./main.vue?vue&type=template&id=f3dc4c5e&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./main.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./main.vue?vue&type=script&lang=js&\"","<template>\r\n\t<!-- <chat-suit-emoji id=\"chat-suit-emoji\" bind:newEmojiStr=\"emojiAction\"></chat-suit-emoji> -->\r\n\t<form class=\"text-input\">\r\n\t\t<view :class=\"isIPX ?'f-row-x' :'f-row'\">\r\n\t\t\t<!-- 发送语音 -->\r\n\t\t\t<view>\r\n\t\t\t\t<image class=\"icon-mic\" src=\"/chat_pages/static/images/voice.png\" @tap=\"openRecordModal\"></image>\r\n\t\t\t</view>\r\n\t\t\t<!-- 输入框 -->\r\n\t\t\t<textarea class=\"f news\" type=\"text\" cursor-spacing=\"65\" confirm-type='done' v-model=\"inputMessage\"\r\n\t\t\t\t@confirm=\"sendMessage\" @input=\"bindMessage\" @tap=\"focus\" @focus=\"focus\" @blur=\"blur\"\r\n\t\t\t\t:confirm-hold=\"isIPX ? true : false\" auto-height :show-confirm-bar='false' maxlength=\"300\" />\r\n\t\t\t<view>\r\n\t\t\t\t<image class=\"icon-mic\" src=\"/chat_pages/static/images/Emoji.png\" @tap=\"openEmoji\"></image>\r\n\t\t\t</view>\r\n\t\t\t<view v-show=\"!inputMessage\" @tap=\"openFunModal\">\r\n\t\t\t\t<image class=\"icon-mic\" src=\"/chat_pages/static/images/ad.png\"></image>\r\n\t\t\t</view>\r\n\t\t\t<button class=\"send-btn-style\" hover-class='hover' @tap=\"sendMessage\" v-show=\"inputMessage\">发送</button>\r\n\t\t</view>\r\n\t</form>\r\n</template>\r\n\r\n<script>\r\n\tlet WebIM = require(\"@/utils/WebIM\")[\"default\"];\r\n\tlet msgType = require(\"../../../msgtype\");\r\n\tlet disp = require(\"@/utils/broadcast\");\r\n\tlet msgStorage = require(\"../../../msgstorage\");\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tinputMessage: \"\",\r\n\t\t\t\t// render input 的值\r\n\t\t\t\tuserMessage: \"\", // input 的实时值\r\n\t\t\t\tisIPX: false,\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tcomponents: {},\r\n\t\tprops: {\r\n\t\t\tusername: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({}),\r\n\t\t\t},\r\n\t\t\tchatType: {\r\n\t\t\t\ttype: String,\r\n\t\t\t\tdefault: msgType.chatType.SINGLE_CHAT,\r\n\t\t\t},\r\n\t\t},\r\n\r\n\t\t// lifetimes\r\n\t\tcreated() {\r\n\t\t\tthis.setData({\r\n\t\t\t\tisIPX: getApp().globalData.isIPX,\r\n\t\t\t});\r\n\t\t\t console.log(WebIM.conn.isOpened(),'isOpened')\r\n\t\t\t if(!WebIM.conn.isOpened() && uni.getStorageSync(\"myUsername\")) {\r\n\t\t\t \t//尝试使用重新登陆\r\n\t\t\t \t\t\tWebIM.conn.open({\r\n\t\t\t \t\t\t\tuser: uni.getStorageSync('myUsername'),\r\n\t\t\t \t\t\t\tpwd: '123456',\r\n\t\t\t \t\t\t\tappkey: WebIM.config.appKey\r\n\t\t\t \t\t\t})\r\n\t\t\t }\r\n\t\t},\r\n\t\tbeforeMount() {},\r\n\r\n\t\tmoved() {},\r\n\r\n\t\tdestroyed() {},\r\n\r\n\t\tmounted() {},\r\n\r\n\t\tmethods: {\r\n\t\t\tfocus() {\r\n\t\t\t\tthis.$emit(\"inputFocused\", null, {\r\n\t\t\t\t\tbubbles: true,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tblur() {\r\n\t\t\t\tthis.$emit(\"inputBlured\", null, {\r\n\t\t\t\t\tbubbles: true,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tisGroupChat() {\r\n\t\t\t\treturn this.chatType == msgType.chatType.CHAT_ROOM;\r\n\t\t\t},\r\n\r\n\t\t\tgetSendToParam() {\r\n\t\t\t\treturn this.isGroupChat() ? this.username.groupId : this.username.your;\r\n\t\t\t},\r\n\r\n\t\t\tbindMessage(e) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tuserMessage: e.detail.value,\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\temojiAction(emoji) {\r\n\t\t\t\tvar str;\r\n\t\t\t\tvar msglen = this.userMessage.length - 1;\r\n\r\n\t\t\t\tif (emoji && emoji != \"[del]\") {\r\n\t\t\t\t\tstr = this.userMessage + emoji;\r\n\t\t\t\t} else if (emoji == \"[del]\") {\r\n\t\t\t\t\tlet start = this.userMessage.lastIndexOf(\"[\");\r\n\t\t\t\t\tlet end = this.userMessage.lastIndexOf(\"]\");\r\n\t\t\t\t\tlet len = end - start;\r\n\r\n\t\t\t\t\tif (end != -1 && end == msglen && len >= 3 && len <= 4) {\r\n\t\t\t\t\t\tstr = this.userMessage.slice(0, start);\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tstr = this.userMessage.slice(0, msglen);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tthis.userMessage = str;\r\n\t\t\t\tthis.inputMessage = str;\r\n\t\t\t},\r\n\r\n\t\t\tsendMessage() {\r\n\t\t\t\tlet me = this;\r\n\t\t\t\tString.prototype.trim = function() {\r\n\t\t\t\t\treturn this.replace(/(^\\s*)|(\\s*$)/g, \"\");\r\n\t\t\t\t};\r\n\t\t\t\tif (!this.userMessage.trim()) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t\tlet id = WebIM.conn.getUniqueId();\r\n\t\t\t\tlet msg = new WebIM.message(msgType.TEXT, id);\r\n\t\t\t\tmsg.set({\r\n\t\t\t\t\tmsg: this.userMessage,\r\n\t\t\t\t\tfrom: this.username.myName,\r\n\t\t\t\t\tto: this.getSendToParam(),\r\n\t\t\t\t\t// roomType: false,\r\n\t\t\t\t\tchatType: this.chatType,\r\n\t\t\t\t\tsuccess(id, serverMsgId) {\r\n\t\t\t\t\t\tconsole.log(\"成功了\");\r\n\t\t\t\t\t\t// 关闭表情弹窗\r\n\t\t\t\t\t\tme.$parent.cancelEmoji()\r\n\t\t\t\t\t\tme.$parent.closeFunModal()\r\n\t\t\t\t\t\tdisp.fire(\"em.chat.sendSuccess\", id, me.userMessage);\r\n\t\t\t\t\t},\r\n\t\t\t\t\tfail(id, serverMsgId) {\r\n\t\t\t\t\t\tconsole.log(\"失败了\");\r\n\t\t\t\t\t},\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (this.chatType == msgType.chatType.CHAT_ROOM) {\r\n\t\t\t\t\t// msg.setGroup(\"groupchat\");\r\n\t\t\t\t\tmsg.setChatType(\"groupchat\");\r\n\t\t\t\t}\r\n\t\t\t\tWebIM.conn.send(msg.body);\r\n\t\t\t\tlet obj = {\r\n\t\t\t\t\tmsg: msg,\r\n\t\t\t\t\ttype: msgType.TEXT,\r\n\t\t\t\t};\r\n\t\t\t\tthis.saveSendMsg(obj);\r\n\t\t\t\tthis.userMessage = \"\";\r\n\t\t\t\tthis.inputMessage = \"\";\r\n\t\t\t\tuni.hideKeyboard();\r\n\t\t\t},\r\n\r\n\t\t\tsaveSendMsg(evt) {\r\n\t\t\t\tconsole.log(evt, 1995);\r\n\t\t\t\tmsgStorage.saveMsg(evt.msg, evt.type);\r\n\t\t\t},\r\n\r\n\t\t\topenEmoji() {\r\n\t\t\t\tthis.$emit('openEmoji')\r\n\t\t\t},\r\n\t\t\topenRecordModal() {\r\n\t\t\t\tthis.$emit('openRecordModal')\r\n\t\t\t},\r\n\t\t\topenFunModal() {\r\n\t\t\t\tthis.$emit('openFunModal')\r\n\t\t\t}\r\n\t\t},\r\n\t};\r\n</script>\r\n<style>\r\n\t@import \"./main.css\";\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./main.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--6-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--6-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--6-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--6-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./main.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1709705868053\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}