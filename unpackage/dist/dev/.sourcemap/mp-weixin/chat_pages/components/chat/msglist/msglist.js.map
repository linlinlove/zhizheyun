{"version":3,"sources":["webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/msglist/msglist.vue?2134","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/msglist/msglist.vue?9bcd","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/msglist/msglist.vue?6b83","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/msglist/msglist.vue?0bdc","uni-app:///chat_pages/components/chat/msglist/msglist.vue","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/msglist/msglist.vue?7c73","webpack:///E:/uniapp/zhizheyun/zhizheyun/zhizheyun(1)/chat_pages/components/chat/msglist/msglist.vue?9092"],"names":["SHORT","NORMAL","data","view","toView","chatMsg","__visibility__","isIPX","myAvatar","eAvatar","components","audioMsg","props","username","type","default","created","beforeMount","page","Index","moved","destroyed","msgStorage","mounted","console","uni","disp","isFail","msgList","item","me","methods","toPositionDetails","id","url","jumpInterview_details","normalScroll","dispMsg","shortScroll","onTap","bubbles","previewImage","urls","getHistoryMsg","renderMsg","historyChatMsgs","e","admin","position","curChatMsg","setTimeout","scrollTop","duration","fail","renderFail","clickMsg","event"],"mappings":";;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgI;AAChI;AAC2D;AACL;AACsC;;;AAG5F;AACgL;AAChL,gBAAgB,yLAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,8FAAM;AACR,EAAE,uGAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,kGAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAAwpB,CAAgB,6qBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACuH5qB;AACA;AACA;EACAA;EACAC;AACA;AACA;AACA;AACA;AACA;AAAA;EAAA;IAAA;EAAA;AAAA;AAAA,gBAGA;EACAC;IACA;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;MACAC;IACA;EACA;;EAEAC;IACAC;EACA;EACAC;IACAC;MACAC;MACAC;QAAA;MAAA;IACA;EACA;EAEA;EACAC;EAEAC;IACA;IACAC;IACAC;EACA;EAEAC;EAEAC;IACA;IACAC;EACA;EACAC;IACA;IACAC;IACA;IACA;IACA;MACA;QACAjB;MACA;IACA;IAEA;IACA;IACA;IAEA;IACA;IACA;IACAkB;IACAC;MACA;MACAC;MACA;MACAH;MACA;MACA;MACAI;QACA,uFACA;UACAC;UACAA;UACAC;YACAzB;UACA;QACA;MACA;;MAEA;MACA;MACA;MACA;;MAEAoB;IACA;IACAH;EAEA;EAEAS;IACAC;MACA;QACAC;QACAnB;MACA;MACAW;QACAS;MACA;IACA;IACAC;MACAV;QACAS;MACA;IACA;IACAE;MACA;QACAjC;MACA;IACA;IACAkC;MACA;MACA;MACA;MACA;MACAP;MAEA;;MAEA;QACA;QACA;UACA;YACAA;UACA;QACA;MACA;QACA;UACAA;QACA;MACA;IACA;IACAQ;MACA;QACAnC;MACA;IACA;IAEAoC;MACA;QACAC;MACA;IACA;IAEAC;MACA;MACAhB;QACAiB;MAEA;IACA;IAEAC;MACA;MACA;MACA;MACA;MACA;MAEA;QACA;QACA;UACAtC;UACAD;QACA;QACAe;QAEA;UACAD;QACA;QAEAO;MACA;IACA;IAEAmB;MACA;MACA;MACAC;MAEA;MAEAA;QAAA;QACA;UACArB;UACAsB;UACAA;YACAC;YACAC;UACA;UACA;YACAF;UACA;QACA;MACA;MACAtB;MAEA;QACA;UACAnB;UACA;UACAD;QACA;MACA;QAEA;UACAC;UACA;UACAD;QACA;MACA;MAEAqB;MACA;MACApB;QACA4C;UACA;YACA5C;UACA;QACA;MACA;MACAoB;MACAN;MACA;MACA+B;QACAzB;UACA0B;UACAC;UACAC;YACA;UAAA;QAEA;MACA;MAEA;QACA;MACA;IACA;IAEAC;MACA;MACA;MACA1B;QACA;UACAC;UACAA;UACAC;YACAzB;UACA;QACA;MACA;MAEA;QACAyB;QACAA;MACA;MAEAL;MACAE;IACA;IAEA4B;MACA,mEACAC,oCACAA;QACA;MACA;IACA;EAEA;AACA;AAAA,4B;;;;;;;;;;;;;AC7YA;AAAA;AAAA;AAAA;AAAuwC,CAAgB,ouCAAG,EAAC,C;;;;;;;;;;;ACA3xC;AACA,OAAO,KAAU,EAAE,kBAKd","file":"chat_pages/components/chat/msglist/msglist.js","sourcesContent":["import { render, staticRenderFns, recyclableRender, components } from \"./msglist.vue?vue&type=template&id=5654686d&scoped=true&\"\nvar renderjs\nimport script from \"./msglist.vue?vue&type=script&lang=js&\"\nexport * from \"./msglist.vue?vue&type=script&lang=js&\"\nimport style0 from \"./msglist.vue?vue&type=style&index=0&id=5654686d&scoped=true&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\runtime\\\\componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"5654686d\",\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"chat_pages/components/chat/msglist/msglist.vue\"\nexport default component.exports","export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\templateLoader.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--17-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\template.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-uni-app-loader\\\\page-meta.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./msglist.vue?vue&type=template&id=5654686d&scoped=true&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./msglist.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\babel-loader\\\\lib\\\\index.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--13-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\script.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./msglist.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view scroll-y=\"true\" :class=\"view + ' wrap ' + (isIPX?'scroll_view_X': '')\" @tap=\"onTap\" upper-threshold=\"-50\"\r\n\t\t:scroll-into-view=\"toView\">\r\n\t\t<view class=\"message\" v-for=\"item in chatMsg\" :key=\"item.mid\" :id=\"item.mid\">\r\n\t\t\t<!-- <view class=\"time\">\r\n\t\t\t\t<text class=\"time-text\">{{ item.time }}</text>\r\n      </view>-->\r\n\t\t\t<!-- 消息主体 -->\r\n\t\t\t<view class=\"main\" v-if=\"item.isType != 1\" :class=\"item.style\">\t\t\t\r\n\t\t\t\t<!-- 消息时间 -->\r\n\t\t\t\t<view class=\"user\">\r\n\t\t\t\t\t<!-- yourname：就是消息的 from -->\r\n\t\t\t\t\t<text class=\"user-text\">{{ ' ' + item.time}}</text>\r\n\t\t\t\t</view>\r\n\t\t\t\t\r\n\t\t\t\t<!-- 发送人头像 -->\r\n\t\t\t\t<image v-if=\"item.style == 'self'\" class=\"avatar\" :src=\"myAvatar\" />\r\n\t\t\t\t<image v-if=\"item.style == ''\" class=\"avatar\" :src=\"eAvatar\" />\r\n\t\t\t\t\r\n\t\t\t\t<!-- 消息内容 -->\r\n\t\t\t\t<view class=\"msg\">\r\n\t\t\t\t\t<!-- 发送三角 -->\r\n\t\t\t\t\t<image class=\"err\" :class=\"(item.style == 'self' && item.isFail) ?  'show' : 'hide'\"\r\n\t\t\t\t\t\tsrc=\"/chat_pages/static/images/msgerr.png\" />\r\n\r\n\t\t\t\t\t<image v-if=\"item.style == 'self'\" src=\"/chat_pages/static/images/poprightarrow2x.png\"\r\n\t\t\t\t\t\tclass=\"msg_poprightarrow\" />\r\n\t\t\t\t\t<image v-if=\"item.style == ''\" src=\"/chat_pages/static/images/popleftarrow2x.png\"\r\n\t\t\t\t\t\tclass=\"msg_popleftarrow\" />\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view v-if=\"item.msg.type == 'img' || item.msg.type == 'video'\">\r\n\t\t\t\t\t\t<image v-if=\"item.msg.type == 'img'\" class=\"avatar\" :src=\"item.msg.data\"\r\n\t\t\t\t\t\t\tstyle=\"width:90px; height:120px; margin:2px auto;\" mode=\"aspectFit\" @tap=\"previewImage\"\r\n\t\t\t\t\t\t\t:data-url=\"item.msg.data\" />\r\n\t\t\t\t\t\t<!-- <video v-if=\"item.msg.type == 'video'\" :src=\"item.msg.data\" controls style=\"width:300rpx;\"/> -->\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<audio-msg v-if=\"item.msg.type == 'audio'\" :msg=\"item\"></audio-msg>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view v-else-if=\"item.msg.type == 'txt' || item.msg.type == 'emoji'\">\r\n\t\t\t\t\t\t<view class=\"template\" v-for=\"(d_item, d_index) in item.msg.data\" :key=\"d_index\">\r\n\t\t\t\t\t\t\t<text :data-msg=\"item\" @tap=\"clickMsg\" v-if=\"d_item.type == 'txt'\" class=\"msg-text\"\r\n\t\t\t\t\t\t\t\tstyle=\"float:left;\" selectable=\"true\">{{ d_item.data }}</text>\r\n\r\n\t\t\t\t\t\t\t<image v-if=\"d_item.type == 'emoji'\" class=\"avatar\"\r\n\t\t\t\t\t\t\t\t:src=\"'/chat_pages/static/images/faces/' + d_item.data\"\r\n\t\t\t\t\t\t\t\tstyle=\"width:25px; height:25px; margin:0 0 2px 0; float:left;\" />\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<!-- 发送面试 -->\r\n\t\t\t\t\t<view v-if=\"item.msg.type=='mianshi' && item.style != 'self'\"\r\n\t\t\t\t\t\t@tap=\"jumpInterview_details(item.msg.ext.invite_id)\">\r\n\t\t\t\t\t\t<view class=\"tilte_a\" style=\"font-size: 32upx;\">\r\n\t\t\t\t\t\t\t对方向您发送了一条面试邀请！\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"\">\r\n\t\t\t\t\t\t\t<view class=\"item_a\" style=\"line-height: 48upx;\">\r\n\t\t\t\t\t\t\t\t时间:{{item.msg.ext.time_}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t<!-- \t<view class=\"item_a\" style=\"line-height: 48upx;\">\r\n\t\t\t\t\t\t\t\t\t地点： {{item.msg.ext.address}}{{item.msg.ext.address}}{{item.msg.ext.address}}{{item.msg.ext.address}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item_a\" style=\"line-height: 48upx;\">\r\n\t\t\t\t\t\t\t\t\t联系人： {{item.msg.ext.concater}}\r\n\t\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t\t\t<view class=\"item_a\" style=\"line-height: 48upx;\">\r\n\t\t\t\t\t\t\t\t\t联系人电话： {{item.msg.ext.phone}}\r\n\t\t\t\t\t\t\t\t</view> -->\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t\r\n\t\t\t<!-- 岗位卡片 -->\r\n\t\t\t<view v-else class=\"positionDetails\" @tap=\"toPositionDetails(item.isContent.position.position_id)\">\r\n\t\t\t\t<view class=\"item-a item\">\r\n\t\t\t\t\t<view class=\"item-a1\">\r\n\t\t\t\t\t\t{{item.isContent.position.name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-a2\">\r\n\t\t\t\t\t\t{{item.isContent.position.salary}}元\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item-b item\">\r\n\t\t\t\t\t\r\n\t\t\t\t\t<view style=\" margin: 0px 10rpx; \" class=\"item-b-1\"\r\n\t\t\t\t\t\tv-for=\"(v,i) in item.isContent.position.ask_json\" :key=\"i\">\r\n\t\t\t\t\t\t{{v.value}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item-c item\">\r\n\t\t\t\t\t<view class=\"item-c-1\">\r\n\t\t\t\t\t\t{{item.isContent.position.enterprise_name}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-c-2\">\r\n\t\t\t\t\t\t{{item.isContent.position.scale}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"item-d item\" style=\"align-items: center;\">\r\n\t\t\t\t\t<view class=\"item-d-1\">\r\n\t\t\t\t\t\t<image class=\"avatar\" :src=\"item.isContent.admin.avatar\" />\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"item-d-2\" style=\"margin-left: 30rpx;\">\r\n\t\t\t\t\t\t{{item.isContent.admin.nickname}}\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\r\n\r\n\t\t</view>\r\n\r\n\t</view>\r\n\t<!-- <view style=\"height: 1px;\"></view> -->\r\n</template>\r\n\r\n\r\n<script>\r\n\tlet msgStorage = require(\"../msgstorage\");\r\n\tlet disp = require(\"@/utils/broadcast\");\r\n\tlet LIST_STATUS = {\r\n\t\tSHORT: \"scroll_view_change\",\r\n\t\tNORMAL: \"scroll_view\"\r\n\t};\r\n\tlet page = 0;\r\n\tlet Index = 0;\r\n\tlet curMsgMid = '';\r\n\tlet isFail = false;\r\n\timport audioMsg from \"./type/audio/audio\";\r\n\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tview: LIST_STATUS.NORMAL,\r\n\t\t\t\ttoView: \"\",\r\n\t\t\t\tchatMsg: [],\r\n\t\t\t\t__visibility__: false,\r\n\t\t\t\tisIPX: false,\r\n\t\t\t\tmyAvatar:\"\",\r\n\t\t\t\teAvatar:'/chat_pages/static/images/theme2x.png',//人事头像\r\n\t\t\t};\r\n\t\t},\r\n\r\n\t\tcomponents: {\r\n\t\t\taudioMsg\r\n\t\t},\r\n\t\tprops: {\r\n\t\t\tusername: {\r\n\t\t\t\ttype: Object,\r\n\t\t\t\tdefault: () => ({})\r\n\t\t\t}\r\n\t\t},\r\n\r\n\t\t// lifetimes\r\n\t\tcreated() {},\r\n\r\n\t\tbeforeMount() {\r\n\t\t\tthis.__visibility__ = true;\r\n\t\t\tpage = 0;\r\n\t\t\tIndex = 0;\r\n\t\t},\r\n\r\n\t\tmoved() {},\r\n\r\n\t\tdestroyed() {\r\n\t\t\tthis.__visibility__ = false;\r\n\t\t\tmsgStorage.off(\"newChatMsg\", this.dispMsg)\r\n\t\t},\r\n\t\tmounted(event) {\r\n\t\t\tlet userInfo=uni.getStorageSync('userInfo');\r\n\t\t\tconsole.log(userInfo.avatar)\r\n\t\t\tthis.myAvatar = userInfo.avatar || '/chat_pages/static/images/theme22x.png'\r\n\t\t\tlet me = this;\r\n\t\t\tif (getApp().globalData.isIPX) {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tisIPX: true\r\n\t\t\t\t});\r\n\t\t\t}\r\n\r\n\t\t\tthis.username = uni.username;\r\n\t\t\tlet username = this.username;\r\n\t\t\tlet myUsername = uni.getStorageSync(\"myUsername\");\r\n\t\t\t\r\n\t\t\tlet sessionKey = username.groupId ? username.groupId + myUsername : username.your + myUsername;\r\n\t\t\tlet chatMsg = uni.getStorageSync(sessionKey) || [];\r\n\t\t\tthis.renderMsg(null, null, chatMsg, sessionKey);\r\n\t\t\tuni.setStorageSync(sessionKey, null);\r\n\t\t\tdisp.on('em.error.sendMsgErr', function(err) {\r\n\t\t\t\t// curMsgMid = err.data.mid;\r\n\t\t\t\tisFail = true;\r\n\t\t\t\t// return;\r\n\t\t\t\tconsole.log('发送失败了');\r\n\t\t\t\treturn;\r\n\t\t\t\tlet msgList = me.chatMsg;\r\n\t\t\t\tmsgList.map(item => {\r\n\t\t\t\t\tif (item.mid.substring(item.mid.length - 10) == curMsgMid.substring(curMsgMid.length -\r\n\t\t\t\t\t\t\t10)) {\r\n\t\t\t\t\t\titem.msg.data[0].isFail = true;\r\n\t\t\t\t\t\titem.isFail = true;\r\n\t\t\t\t\t\tme.setData({\r\n\t\t\t\t\t\t\tchatMsg: msgList\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// if (me.curChatMsg[0].mid == curMsgMid) {\r\n\t\t\t\t//   me.curChatMsg[0].msg.data[0].isShow = false;\r\n\t\t\t\t//   me.curChatMsg[0].isShow = false;\r\n\t\t\t\t// }\r\n\r\n\t\t\t\tuni.setStorageSync(\"rendered_\" + sessionKey, msgList);\r\n\t\t\t});\r\n\t\t\tmsgStorage.on(\"newChatMsg\", this.dispMsg);\r\n\t\t\t\r\n\t\t},\r\n\r\n\t\tmethods: {\r\n\t\t\ttoPositionDetails(id){\r\n\t\t\t\tlet obj={\r\n\t\t\t\t\tid,\r\n\t\t\t\t\ttype:1\r\n\t\t\t\t}\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/position/job_detail?e=' + JSON.stringify(obj)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tjumpInterview_details(id) {\r\n\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\turl: '/pages/news/interview_details?id=' + id\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tnormalScroll() {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tview: LIST_STATUS.NORMAL\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdispMsg(renderableMsg, type, curChatMsg, sesskey) {\r\n\t\t\t\tlet me = this;\r\n\t\t\t\tlet username = this.username;\r\n\t\t\t\tlet myUsername = uni.getStorageSync(\"myUsername\");\r\n\t\t\t\tlet sessionKey = username.groupId ? username.groupId + myUsername : username.your + myUsername;\r\n\t\t\t\tme.curChatMsg = curChatMsg;\r\n\r\n\t\t\t\tif (!me.__visibility__) return; // 判断是否属于当前会话\r\n\r\n\t\t\t\tif (username.groupId) {\r\n\t\t\t\t\t// 群消息的 to 是 id，from 是 name\r\n\t\t\t\t\tif (renderableMsg.info.from == username.groupId || renderableMsg.info.to == username.groupId) {\r\n\t\t\t\t\t\tif (sesskey == sessionKey) {\r\n\t\t\t\t\t\t\tme.renderMsg(renderableMsg, type, curChatMsg, sessionKey, 'newMsg');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t} else if (renderableMsg.info.from == username.your || renderableMsg.info.to == username.your) {\r\n\t\t\t\t\tif (sesskey == sessionKey) {\r\n\t\t\t\t\t\tme.renderMsg(renderableMsg, type, curChatMsg, sessionKey, 'newMsg');\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tshortScroll() {\r\n\t\t\t\tthis.setData({\r\n\t\t\t\t\tview: LIST_STATUS.SHORT\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tonTap() {\r\n\t\t\t\tthis.$emit(\"msglistTap\", null, {\r\n\t\t\t\t\tbubbles: true\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tpreviewImage(event) {\r\n\t\t\t\tvar url = event.target.dataset.url;\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: [url] // 需要预览的图片 http 链接列表\r\n\r\n\t\t\t\t});\r\n\t\t\t},\r\n\r\n\t\t\tgetHistoryMsg() {\r\n\t\t\t\tlet me = this;\r\n\t\t\t\tlet username = this.username;\r\n\t\t\t\tlet myUsername = uni.getStorageSync(\"myUsername\");\r\n\t\t\t\tlet sessionKey = username.groupId ? username.groupId + myUsername : username.your + myUsername;\r\n\t\t\t\tlet historyChatMsgs = uni.getStorageSync(\"rendered_\" + sessionKey) || [];\r\n\r\n\t\t\t\tif (Index < historyChatMsgs.length) {\r\n\t\t\t\t\tlet timesMsgList = historyChatMsgs.slice(-Index - 10, -Index);\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tchatMsg: timesMsgList.concat(me.chatMsg),\r\n\t\t\t\t\t\ttoView: timesMsgList[timesMsgList.length - 1].mid\r\n\t\t\t\t\t});\r\n\t\t\t\t\tIndex += timesMsgList.length;\r\n\r\n\t\t\t\t\tif (timesMsgList.length == 10) {\r\n\t\t\t\t\t\tpage++;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tuni.stopPullDownRefresh();\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\trenderMsg(renderableMsg, type, curChatMsg, sessionKey, isnew) {\r\n\t\t\t\tlet me = this;\r\n\t\t\t\tvar historyChatMsgs = uni.getStorageSync(\"rendered_\" + sessionKey) || [];\r\n\t\t\t\thistoryChatMsgs = historyChatMsgs.concat(curChatMsg);\r\n\r\n\t\t\t\tif (!historyChatMsgs.length) return;\r\n\r\n\t\t\t\thistoryChatMsgs.forEach((e) => {\r\n\t\t\t\t\tif (e.style == \"self\" && e.msg.ext?.type == 0) {\r\n\t\t\t\t\t\tconsole.log(e)\r\n\t\t\t\t\t\te.isType = 1\r\n\t\t\t\t\t\te.isContent = {\r\n\t\t\t\t\t\t\tadmin: JSON.parse(e.msg.ext.admin),\r\n\t\t\t\t\t\t\tposition: JSON.parse(e.msg.ext.position)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(e.isContent.position.ask_json!=''){\r\n\t\t\t\t\t\t\te.isContent.position.ask_json = JSON.parse(e.isContent.position.ask_json)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\tconsole.log(historyChatMsgs)\r\n\r\n\t\t\t\tif (isnew == 'newMsg') {\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tchatMsg: this.chatMsg.concat(curChatMsg),\r\n\t\t\t\t\t\t// 跳到最后一条\r\n\t\t\t\t\t\ttoView: historyChatMsgs[historyChatMsgs.length - 1].mid\r\n\t\t\t\t\t});\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tthis.setData({\r\n\t\t\t\t\t\tchatMsg: historyChatMsgs.slice(-10),\r\n\t\t\t\t\t\t// 跳到最后一条\r\n\t\t\t\t\t\ttoView: historyChatMsgs[historyChatMsgs.length - 1].mid\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.setStorageSync(\"rendered_\" + sessionKey, historyChatMsgs);\r\n\t\t\t\tlet chatMsg = uni.getStorageSync(sessionKey) || [];\r\n\t\t\t\tchatMsg.map(function(item, index) {\r\n\t\t\t\t\tcurChatMsg.map(function(item2, index2) {\r\n\t\t\t\t\t\tif (item2.mid == item.mid) {\r\n\t\t\t\t\t\t\tchatMsg.splice(index, 1);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\tuni.setStorageSync(sessionKey, chatMsg);\r\n\t\t\t\tIndex = historyChatMsgs.slice(-10).length;\r\n\t\t\t\t// setTimeout 兼容支付宝小程序\r\n\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\tuni.pageScrollTo({\r\n\t\t\t\t\t\tscrollTop: 5000,\r\n\t\t\t\t\t\tduration: 300,\r\n\t\t\t\t\t\tfail: (e) => {\r\n\t\t\t\t\t\t\t//console.log('滚失败了', e)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t}, 100)\r\n\r\n\t\t\t\tif (isFail) {\r\n\t\t\t\t\tthis.renderFail(sessionKey);\r\n\t\t\t\t}\r\n\t\t\t},\r\n\r\n\t\t\trenderFail(sessionKey) {\r\n\t\t\t\tlet me = this;\r\n\t\t\t\tlet msgList = me.chatMsg;\r\n\t\t\t\tmsgList.map(item => {\r\n\t\t\t\t\tif (item.mid.substring(item.mid.length - 10) == curMsgMid.substring(curMsgMid.length - 10)) {\r\n\t\t\t\t\t\titem.msg.data[0].isFail = true;\r\n\t\t\t\t\t\titem.isFail = true;\r\n\t\t\t\t\t\tme.setData({\r\n\t\t\t\t\t\t\tchatMsg: msgList\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (me.curChatMsg[0].mid == curMsgMid) {\r\n\t\t\t\t\tme.curChatMsg[0].msg.data[0].isShow = false;\r\n\t\t\t\t\tme.curChatMsg[0].isShow = false;\r\n\t\t\t\t}\r\n\r\n\t\t\t\tuni.setStorageSync(\"rendered_\" + sessionKey, msgList);\r\n\t\t\t\tisFail = false;\r\n\t\t\t},\r\n\r\n\t\t\tclickMsg(event) {\r\n\t\t\t\tif (typeof(event.target.dataset.msg) == 'object' &&\r\n\t\t\t\t\tevent.target.dataset.msg.msg.ext &&\r\n\t\t\t\t\tevent.target.dataset.msg.msg.ext.msg_extension) {\r\n\t\t\t\t\tthis.$emit(\"clickMsg\", event.target.dataset.msg.msg.ext)\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t};\r\n</script>\r\n<style scoped lang=\"scss\">\r\n\t.positionDetails {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t\tbackground: #cae0e269;\r\n\t\tborder-radius: 30rpx;\r\n\t\tpadding: 20rpx;\r\n\t\tmargin-top: 10rpx;\r\n\t\tfont-size: 26rpx;\r\n\r\n\t\t.item {\r\n\t\t\tmargin: 10rpx;\r\n\t\t\tdisplay: flex;\r\n\r\n\t\t\t.item-a {\r\n\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t.item-c {\r\n\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t.item-c-1 {}\r\n\r\n\t\t\t\t.item-c-2 {}\r\n\t\t\t}\r\n\r\n\t\t\t.item-d {\r\n\t\t\t\tdisplay: flex;\r\n\r\n\t\t\t\t.item-d-1 {\r\n\t\t\t\t\t.avatar {\r\n\t\t\t\t\t\t// height: 72rpx !important;\r\n\t\t\t\t\t\t// width: 72rpx !important;\r\n\t\t\t\t\t\t// border-radius: 50% !important;\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\t.item-d-2 {}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t.item-a1 {\r\n\t\tfont-weight: 600;\r\n\t\twidth: 50%;\r\n\t}\r\n\r\n\t.item-a2 {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row-reverse;\r\n\t\twidth: 100%;\r\n\t\tcolor: blue;\r\n\r\n\t}\r\n\r\n\t.item-b {\r\n\t\tdisplay: flex;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #252222;\r\n\t\twidth: 80%;\r\n\t\tfont-size: 24rpx;\r\n\t\tcolor: #252222;\r\n\t\twidth: 80%;\r\n\r\n\t\t.item-b-1 {}\r\n\r\n\t\t.item-b-2 {}\r\n\r\n\t\t.item-b-3 {}\r\n\r\n\t\t.item-b-4 {}\r\n\t}\r\n\r\n\t.item-c-2 {\r\n\t\tmargin-left: 30rpx;\r\n\t}\r\n\r\n\t/* .btn_{\r\n\t\tdisplay: grid;\r\n\t\tgrid-template-columns: 100upx 100upx;\r\n\t\tjustify-content: space-between;\r\n\t} */\r\n\t/* .tilte_a{\r\n\t\tfont-size: 28upx;\r\n\t}\r\n\t.item_a{\r\n\t\tline-height: 32upx;\r\n\t} */\r\n\t@import \"./msglist.css\";\r\n</style>\n","import mod from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./msglist.vue?vue&type=style&index=0&id=5654686d&scoped=true&lang=scss&\"; export default mod; export * from \"-!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\mini-css-extract-plugin\\\\dist\\\\loader.js??ref--8-oneOf-1-0!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\css-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-1!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\loaders\\\\stylePostLoader.js!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-2!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\postcss-loader\\\\src\\\\index.js??ref--8-oneOf-1-3!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\sass-loader\\\\dist\\\\cjs.js??ref--8-oneOf-1-4!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\webpack-preprocess-loader\\\\index.js??ref--8-oneOf-1-5!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\vue-cli-plugin-uni\\\\packages\\\\vue-loader\\\\lib\\\\index.js??vue-loader-options!D:\\\\HBuilderX\\\\HBuilderX\\\\plugins\\\\uniapp-cli\\\\node_modules\\\\@dcloudio\\\\webpack-uni-mp-loader\\\\lib\\\\style.js!./msglist.vue?vue&type=style&index=0&id=5654686d&scoped=true&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1709705868671\n      var cssReload = require(\"D:/HBuilderX/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}