{"version":3,"sources":["uni-app:///chat_pages/components/chat/inputbar/suit/audio/record_status.js","uni-app:///chat_pages/components/chat/msglist/type/audio/audioCtxFactory.js","uni-app:///chat_pages/components/chat/msglist/type/audio/playStatus.js"],"names":["module","exports","RecordDesc","RecordStatus","SHOW","HIDE","HOLD","SWIPE","RELEASE","allCtx","inUseCtx","allComm","proxier","ctx","__play__","play","__pause__","pause","playProxier","pauseProxier","call","getCtx","mid","returnCtx","uni","createInnerAudioContext","getAllCtx","setStorageSync","JSON","stringify","Object","keys","getCommponet","comm","curComm","PLAYING","PAUSE","STOP"],"mappings":";;;;;;;;;AAAAA,MAAM,CAACC,OAAO,GAAG;EACfC,UAAU,EAAE;IACV,CAAC,EAAE,QAAQ;IACX,CAAC,EAAE,QAAQ;IACX,CAAC,EAAE;EACL,CAAC;EACDC,YAAY,EAAE;IACZC,IAAI,EAAE,CAAC;IACPC,IAAI,EAAE,CAAC;IACPC,IAAI,EAAE,CAAC;IACPC,KAAK,EAAE,CAAC;IACRC,OAAO,EAAE;EACX;AACF,CAAC,C;;;;;;;;;;;ACbD;AACA;AACA;AACA;AACA,IAAIC,MAAM,GAAG,CAAC,CAAC;AACf,IAAIC,QAAQ,GAAG,IAAI;AACnB,IAAIC,OAAO,GAAG,CAAC,CAAC;AAEhB,SAASC,OAAO,CAACC,GAAG,EAAE;EACpB,IAAIC,QAAQ,GAAGD,GAAG,CAACE,IAAI;EACvB,IAAIC,SAAS,GAAGH,GAAG,CAACI,KAAK;EACzBJ,GAAG,CAACE,IAAI,GAAGG,WAAW;EACtBL,GAAG,CAACI,KAAK,GAAGE,YAAY;EAExB,SAASD,WAAW,GAAG;IACrB;IACA,IAAIR,QAAQ,IAAIA,QAAQ,IAAI,IAAI,EAAE;MAChCA,QAAQ,CAACO,KAAK,EAAE;IAClB;IAEAH,QAAQ,CAACM,IAAI,CAAC,IAAI,CAAC;IAEnBV,QAAQ,GAAG,IAAI;EACjB;EAEA,SAASS,YAAY,GAAG;IACtB;IACA,IAAIT,QAAQ,IAAI,IAAI,EAAE;MACpBM,SAAS,CAACI,IAAI,CAAC,IAAI,CAAC;IACtB;EACF;AACF;AAEApB,MAAM,CAACC,OAAO,GAAG;EACfoB,MAAM,kBAACC,GAAG,EAAE;IACV,IAAIC,SAAS,GAAGd,MAAM,CAACa,GAAG,CAAC;IAE3B,IAAI,CAACC,SAAS,EAAE;MACdA,SAAS,GAAGC,GAAG,CAACC,uBAAuB,EAAE;MACzChB,MAAM,CAACa,GAAG,CAAC,GAAGC,SAAS;MACvBX,OAAO,CAACW,SAAS,CAAC;IACpB;IAEA,OAAOA,SAAS;EAClB,CAAC;EAEDG,SAAS,uBAAG;IACVF,GAAG,CAACG,cAAc,CAAC,QAAQ,EAAEC,IAAI,CAACC,SAAS,CAACC,MAAM,CAACC,IAAI,CAACtB,MAAM,CAAC,CAAC,CAAC;IACjE,OAAOA,MAAM;EACf,CAAC;EAEDuB,YAAY,wBAACV,GAAG,EAAEW,IAAI,EAAE;IACtB,IAAIC,OAAO,GAAGvB,OAAO,CAACW,GAAG,CAAC;IAE1B,IAAI,CAACY,OAAO,EAAE;MACZvB,OAAO,CAACW,GAAG,CAAC,GAAGW,IAAI;IACrB;IAEA,OAAOtB,OAAO;EAChB;AAEF,CAAC,C;;;;;;;;;;;;AC7DDX,MAAM,CAACC,OAAO,GAAG;EACfkC,OAAO,EAAE,SAAS;EAClBC,KAAK,EAAE,OAAO;EACdC,IAAI,EAAE;AACR,CAAC,C","file":"chat_pages/common/vendor.js","sourcesContent":["module.exports = {\n  RecordDesc: {\n    0: \"长按开始录音\",\n    2: \"向上滑动取消\",\n    3: \"松开手取消\"\n  },\n  RecordStatus: {\n    SHOW: 0,\n    HIDE: 1,\n    HOLD: 2,\n    SWIPE: 3,\n    RELEASE: 4\n  }\n};","// 每一个音频消息都有自己的 ctx。\n// 可以有多个 ctx，每次播放都能知道是哪个 ctx 在调用，从而让其他的 ctx pause。\n// 消息销毁，记得处理 ctx。\n// 主要是同步跨 ctx 的操作，保证只有一个 ctx 播放\nlet allCtx = {};\nlet inUseCtx = null;\nlet allComm = {};\n\nfunction proxier(ctx) {\n  let __play__ = ctx.play;\n  let __pause__ = ctx.pause;\n  ctx.play = playProxier;\n  ctx.pause = pauseProxier;\n\n  function playProxier() {\n    // 如果正在播放的不是自己，暂停\n    if (inUseCtx && inUseCtx != this) {\n      inUseCtx.pause();\n    }\n\n    __play__.call(this);\n\n    inUseCtx = this;\n  }\n\n  function pauseProxier() {\n    // 只有是自己才 pause\n    if (inUseCtx == this) {\n      __pause__.call(this);\n    }\n  }\n}\n\nmodule.exports = {\n  getCtx(mid) {\n    let returnCtx = allCtx[mid];\n\n    if (!returnCtx) {\n      returnCtx = uni.createInnerAudioContext();\n      allCtx[mid] = returnCtx;\n      proxier(returnCtx);\n    }\n\n    return returnCtx;\n  },\n\n  getAllCtx() {\n    uni.setStorageSync(\"allCtx\", JSON.stringify(Object.keys(allCtx)));\n    return allCtx;\n  },\n\n  getCommponet(mid, comm) {\n    let curComm = allComm[mid];\n\n    if (!curComm) {\n      allComm[mid] = comm;\n    }\n\n    return allComm;\n  }\n\n};","module.exports = {\n  PLAYING: \"playing\",\n  PAUSE: \"pause\",\n  STOP: \"stop\"\n};"],"sourceRoot":""}